<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>APM:Libraries: libraries/AP_GPS/AP_GPS.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_dc27bcd5d3e114c391ea7ea0e777b78e.html">AP_GPS</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AP_GPS.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AP__GPS_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// -*- tab-width: 4; Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil -*-</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">   This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">   (at your option) any later version.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Common_8h.html">AP_Common/AP_Common.h</a>&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Math_8h.html">AP_Math/AP_Math.h</a>&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Notify_8h.html">AP_Notify/AP_Notify.h</a>&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Progmem_8h.html">AP_Progmem/AP_Progmem.h</a>&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__GPS_8h.html">AP_GPS.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a>&amp; <a class="code" href="AP__GPS_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// table of user settable parameters</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">const</span> <a class="code" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code" href="classAP__GPS.html#a58a05f48dce64267c71558d39b7917e9">AP_GPS::var_info</a>[] = {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">// @Param: TYPE</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">// @DisplayName: GPS type</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">// @Description: GPS type</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="comment">// @Values: 0:None,1:AUTO,2:uBlox,3:MTK,4:MTK19,5:NMEA,6:SiRF,7:HIL,8:SwiftNav,9:PX4-UAVCAN,10:SBF,11:GSOF</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;TYPE&quot;</span>,    0, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _type[0], 1),</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// @Param: TYPE2</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// @DisplayName: 2nd GPS type</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">// @Description: GPS type of 2nd GPS</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// @Values: 0:None,1:AUTO,2:uBlox,3:MTK,4:MTK19,5:NMEA,6:SiRF,7:HIL,8:SwiftNav,9:PX4-UAVCAN,10:SBF,11:GSOF</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;TYPE2&quot;</span>,   1, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _type[1], 0),</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">// @Param: NAVFILTER</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// @DisplayName: Navigation filter setting</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// @Description: Navigation filter engine setting</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">// @Values: 0:Portable,2:Stationary,3:Pedestrian,4:Automotive,5:Sea,6:Airborne1G,7:Airborne2G,8:Airborne4G</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;NAVFILTER&quot;</span>, 2, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _navfilter, GPS_ENGINE_AIRBORNE_4G),</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// @Param: AUTO_SWITCH</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// @DisplayName: Automatic Switchover Setting</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// @Description: Automatic switchover to GPS reporting best lock</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// @Values: 0:Disabled,1:Enabled</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;AUTO_SWITCH&quot;</span>, 3, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _auto_switch, 1),</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">// @Param: MIN_DGPS</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// @DisplayName: Minimum Lock Type Accepted for DGPS</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// @Description: Sets the minimum type of differential GPS corrections required before allowing to switch into DGPS mode.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// @Values: 0:Any,50:FloatRTK,100:IntegerRTK</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MIN_DGPS&quot;</span>, 4, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _min_dgps, 100),</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// @Param: SBAS_MODE</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// @DisplayName: SBAS Mode</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// @Description: This sets the SBAS (satellite based augmentation system) mode if available on this GPS. If set to 2 then the SBAS mode is not changed in the GPS. Otherwise the GPS will be reconfigured to enable/disable SBAS. Disabling SBAS may be worthwhile in some parts of the world where an SBAS signal is available but the baseline is too long to be useful.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// @Values: 0:Disabled,1:Enabled,2:NoChange</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SBAS_MODE&quot;</span>, 5, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _sbas_mode, 2),</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// @Param: MIN_ELEV</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// @DisplayName: Minimum elevation</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">// @Description: This sets the minimum elevation of satellites above the horizon for them to be used for navigation. Setting this to -100 leaves the minimum elevation set to the GPS modules default.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// @Range: -100 90</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// @Units: Degrees</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MIN_ELEV&quot;</span>, 6, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _min_elevation, -100),</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// @Param: INJECT_TO</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// @DisplayName: Destination for GPS_INJECT_DATA MAVLink packets</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// @Description: The GGS can send raw serial packets to inject data to multiple GPSes.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// @Values: 0:send to first GPS, 1:send to 2nd GPS, 127:send to all</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;INJECT_TO&quot;</span>,   7, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _inject_to, <a class="code" href="AP__GPS_8h.html#af476b309d3827917a4217a393c7bb6ed">GPS_RTK_INJECT_TO_ALL</a>),</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// @Param: SBP_LOGMASK</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// @DisplayName: Swift Binary Protocol Logging Mask</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">// @Description: Masked with the SBP msg_type field to determine whether SBR1/SBR2 data is logged</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// @Values: 0x0000:None, 0xFFFF:All, 0xFF00:External only</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SBP_LOGMASK&quot;</span>, 8, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _sbp_logmask, 0xFF00),</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// @Param: RAW_DATA</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// @DisplayName: Raw data logging</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// @Description: Enable logging of RXM raw data from uBlox which includes carrier phase and pseudo range information. This allows for post processing of dataflash logs for more precise positioning. Note that this requires a raw capable uBlox such as the 6P or 6T.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// @Values: 0:Disabled,1:log at 1MHz,5:log at 5MHz</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RAW_DATA&quot;</span>, 9, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _raw_data, 0),</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// @Param: GNSS_MODE</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// @DisplayName: GNSS system configuration</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// @Description: Bitmask for what GNSS system to use (all unchecked or zero to leave GPS as configured)</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// @Values: 0:Leave as currently configured, 1:GPS-NoSBAS, 3:GPS+SBAS, 4:Galileo-NoSBAS, 6:Galileo+SBAS, 8:Beidou, 51:GPS+IMES+QZSS+SBAS (Japan Only), 64:GLONASS, 66:GLONASS+SBAS, 67:GPS+GLONASS+SBAS</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// @Bitmask: 0:GPS, 1:SBAS, 2:Galileo, 3:Beidou, 4:IMES, 5:QZSS, 6:GLOSNASS</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GNSS_MODE&quot;</span>, 10, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _gnss_mode, 0),</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// @Param: SAVE_CFG</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// @DisplayName: Save GPS configuration</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// @Description: Determines whether the configuration for this GPS should be written to non-volatile memory on the GPS. Currently working for UBlox.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// @Values: 0:Do not save config,1:Save config</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SAVE_CFG&quot;</span>, 11, <a class="code" href="classAP__GPS.html">AP_GPS</a>, _save_config, 0),</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;};</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a91c760c11e577d49815bc1a0443cf7f6">  122</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__GPS.html#a91c760c11e577d49815bc1a0443cf7f6">AP_GPS::init</a>(<a class="code" href="classDataFlash__Class.html">DataFlash_Class</a> *dataflash, <span class="keyword">const</span> <a class="code" href="classAP__SerialManager.html">AP_SerialManager</a>&amp; <a class="code" href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a>)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="classAP__GPS.html#a823851040451dad3c3b449aaff655cf7">_DataFlash</a> = dataflash;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a> = 0;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// search for serial ports with gps protocol</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[0] = serial_manager.<a class="code" href="classAP__SerialManager.html#af80d1e798f50bcd4ffcff2f3313e3950">find_serial</a>(<a class="code" href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7a22d7bc8b55699d3423ceb94263ad982d">AP_SerialManager::SerialProtocol_GPS</a>, 0);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[1] = serial_manager.<a class="code" href="classAP__SerialManager.html#af80d1e798f50bcd4ffcff2f3313e3950">find_serial</a>(<a class="code" href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7a22d7bc8b55699d3423ceb94263ad982d">AP_SerialManager::SerialProtocol_GPS</a>, 1);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="classAP__GPS.html#ac72f28687a306b821da873c6b2145241">_last_instance_swap_ms</a> = 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">// baudrates to try to detect GPSes with</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keyword">const</span> uint32_t <a class="code" href="classAP__GPS.html#ac89218621af4ae16bce41e0fbcb8faf1">AP_GPS::_baudrates</a>[] = {4800U, 38400U, 115200U, 57600U, 9600U, 230400U};</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">// initialisation blobs to send to the GPS to try to get it into the</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// right mode</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classAP__GPS.html#a1b88be4642982ed39abefd25e9f38003">AP_GPS::_initialisation_blob</a>[] = <a class="code" href="AP__GPS__UBLOX_8h.html#ab01245792ac1376be9de89e35cdc6690">UBLOX_SET_BINARY</a> <a class="code" href="AP__GPS__MTK__Common_8h.html#a33cc37eaf57637b4b2476d9efcf6611a">MTK_SET_BINARY</a> <a class="code" href="AP__GPS__SIRF_8h.html#a688aa025e0239993674de15fccc32285">SIRF_SET_BINARY</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="classAP__GPS.html#a3cd95199f09885a5ea7a604aca167baa">AP_GPS::_initialisation_raw_blob</a>[] = <a class="code" href="AP__GPS__UBLOX_8h.html#af4c5d4398ddf4985bd0ae1c94cc5bca3">UBLOX_SET_BINARY_RAW_BAUD</a> <a class="code" href="AP__GPS__MTK__Common_8h.html#a33cc37eaf57637b4b2476d9efcf6611a">MTK_SET_BINARY</a> <a class="code" href="AP__GPS__SIRF_8h.html#a688aa025e0239993674de15fccc32285">SIRF_SET_BINARY</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">  send some more initialisation string bytes if there is room in the</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">  UART transmit buffer</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a90b25b2edbb127b22e597a56f2a01e42">  145</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__GPS.html#a90b25b2edbb127b22e597a56f2a01e42">AP_GPS::send_blob_start</a>(uint8_t instance, <span class="keyword">const</span> <span class="keywordtype">char</span> *_blob, uint16_t size)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="classAP__GPS.html#abc198fabf6b2db957161df55675cf805">initblob_state</a>[instance].blob = _blob;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="classAP__GPS.html#abc198fabf6b2db957161df55675cf805">initblob_state</a>[instance].remaining = size;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">  send some more initialisation string bytes if there is room in the</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">  UART transmit buffer</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classAP__GPS.html#ad4512e4952aa41566d6afb110e0fd6a1">  155</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__GPS.html#ad4512e4952aa41566d6afb110e0fd6a1">AP_GPS::send_blob_update</a>(uint8_t instance)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// exit immediately if no uart for this instance</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance] == NULL) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// see if we can write some more of the initialisation blob</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#abc198fabf6b2db957161df55675cf805">initblob_state</a>[instance].<a class="code" href="classAP__GPS.html#a88ffa0ff28e2c65d11c8b1ced2c43760">remaining</a> &gt; 0) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        int16_t space = <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]-&gt;<a class="code" href="classAP__HAL_1_1Stream.html#a7028834212873394e906bcaf7f4a06b3">txspace</a>();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">if</span> (space &gt; (int16_t)<a class="code" href="classAP__GPS.html#abc198fabf6b2db957161df55675cf805">initblob_state</a>[instance].<a class="code" href="classAP__GPS.html#a88ffa0ff28e2c65d11c8b1ced2c43760">remaining</a>) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            space = <a class="code" href="classAP__GPS.html#abc198fabf6b2db957161df55675cf805">initblob_state</a>[instance].remaining;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">while</span> (space &gt; 0) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]-&gt;<a class="code" href="classAP__HAL_1_1Print.html#acc65391952a43334f8f5c9bef341f501">write</a>(<a class="code" href="AP__Progmem_8h.html#a1514e0408e036062b4af844baaf567da">pgm_read_byte</a>(<a class="code" href="classAP__GPS.html#abc198fabf6b2db957161df55675cf805">initblob_state</a>[instance].<a class="code" href="classAP__GPS.html#a9cc00433bd94933f1259dc8bfe859fe1">blob</a>));</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <a class="code" href="classAP__GPS.html#abc198fabf6b2db957161df55675cf805">initblob_state</a>[instance].blob++;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            space--;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <a class="code" href="classAP__GPS.html#abc198fabf6b2db957161df55675cf805">initblob_state</a>[instance].remaining--;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  run detection step for one GPS instance. If this finds a GPS then it</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">  will fill in drivers[instance] and change state[instance].status</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">  from NO_GPS to NO_FIX.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a4bdd5c70ed358b4147a58c7d09f040dd">  183</a></span>&#160;<a class="code" href="classAP__GPS.html#a4bdd5c70ed358b4147a58c7d09f040dd">AP_GPS::detect_instance</a>(uint8_t instance)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classAP__GPS__Backend.html">AP_GPS_Backend</a> *new_gps = NULL;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">struct </span><a class="code" href="structAP__GPS_1_1detect__state.html">detect_state</a> *dstate = &amp;<a class="code" href="structAP__GPS_1_1detect__state.html">detect_state</a>[instance];</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    uint32_t now = hal.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a26b68339fc68a562d8d3a1238d0ec8c1">millis</a>();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_PX4</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a9b2766a48a9b2711183707bc382683f4">GPS_TYPE_PX4</a>) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">// check for explicitely chosen PX4 GPS beforehand</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">// it is not possible to autodetect it, nor does it require a real UART</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        hal.<a class="code" href="classAP__HAL_1_1HAL.html#a92168462febe0f5ab9556dc9ea4ddb7a">console</a>-&gt;<a class="code" href="classAP__HAL_1_1Print.html#acfe80773011eb17dfb52c2fba517a093">print</a>(<span class="stringliteral">&quot; PX4 &quot;</span>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        new_gps = <span class="keyword">new</span> <a class="code" href="classAP__GPS__PX4.html">AP_GPS_PX4</a>(*<span class="keyword">this</span>, <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance], <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">goto</span> found_gps;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance] == NULL) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">// UART not available</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__State.html#a95606c520bd395452a6e171828a4988d">instance</a> = instance;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__State.html#a0a8710bdc386183e8afea11565745c75">status</a> = <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca5eba95d16dc0519820e356de7be1362d">NO_GPS</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__State.html#ab346404b3a35776ea25982265c346974">hdop</a> = 9999;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// by default the sbf/trimble gps outputs no data on its port, until configured.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a18e7fef3055b02873f12983bd9c8b350">GPS_TYPE_SBF</a>) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        hal.<a class="code" href="classAP__HAL_1_1HAL.html#a92168462febe0f5ab9556dc9ea4ddb7a">console</a>-&gt;<a class="code" href="classAP__HAL_1_1Print.html#acfe80773011eb17dfb52c2fba517a093">print</a>(<span class="stringliteral">&quot; SBF &quot;</span>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        new_gps = <span class="keyword">new</span> <a class="code" href="classAP__GPS__SBF.html">AP_GPS_SBF</a>(*<span class="keyword">this</span>, <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance], <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a76a222d514c32a4bc7cb319b4572bb41">GPS_TYPE_GSOF</a>)) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        hal.<a class="code" href="classAP__HAL_1_1HAL.html#a92168462febe0f5ab9556dc9ea4ddb7a">console</a>-&gt;<a class="code" href="classAP__HAL_1_1Print.html#acfe80773011eb17dfb52c2fba517a093">print</a>(<span class="stringliteral">&quot; GSOF &quot;</span>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        new_gps = <span class="keyword">new</span> <a class="code" href="classAP__GPS__GSOF.html">AP_GPS_GSOF</a>(*<span class="keyword">this</span>, <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance], <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// record the time when we started detection. This is used to try</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// to avoid initialising a uBlox as a NMEA GPS</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a6eab9f0ae0962738938c38275385ff1c">detect_started_ms</a> == 0) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a6eab9f0ae0962738938c38275385ff1c">detect_started_ms</a> = now;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span> (now - dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a3a88e9dbec6da9c65c26f0167b7151ff">last_baud_change_ms</a> &gt; <a class="code" href="AP__GPS_8h.html#a2f6d184a58b49c746340c1139bd6e0ea">GPS_BAUD_TIME_MS</a>) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// try the next baud rate</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a6aeb1068253a9101ac83490271057e2f">last_baud</a>++;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">if</span> (dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a6aeb1068253a9101ac83490271057e2f">last_baud</a> == <a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(<a class="code" href="classAP__GPS.html#ac89218621af4ae16bce41e0fbcb8faf1">_baudrates</a>)) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a6aeb1068253a9101ac83490271057e2f">last_baud</a> = 0;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        uint32_t baudrate = <a class="code" href="AP__Progmem_8h.html#a1940138bf478b967dbe8c1b559885bd1">pgm_read_dword</a>(&amp;<a class="code" href="classAP__GPS.html#ac89218621af4ae16bce41e0fbcb8faf1">_baudrates</a>[dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a6aeb1068253a9101ac83490271057e2f">last_baud</a>]);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]-&gt;<a class="code" href="classAP__HAL_1_1UARTDriver.html#a2a83124757f6f8f6eb4d25b11c9cb97e">begin</a>(baudrate);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]-&gt;<a class="code" href="classAP__HAL_1_1UARTDriver.html#ae831a0d75f4760267d444c522e1271a1">set_flow_control</a>(<a class="code" href="classAP__HAL_1_1UARTDriver.html#acd5e319d580fe14755931d37b5d4deafa67a3cf106c9c7c7d6e454a7a9610a7d8">AP_HAL::UARTDriver::FLOW_CONTROL_DISABLE</a>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a3a88e9dbec6da9c65c26f0167b7151ff">last_baud_change_ms</a> = now;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#if UBLOX_RXM_RAW_LOGGING</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classAP__GPS.html#afbaefc08192797ad72140887aaf1c246">_raw_data</a> != 0)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="classAP__GPS.html#a90b25b2edbb127b22e597a56f2a01e42">send_blob_start</a>(instance, <a class="code" href="classAP__GPS.html#a3cd95199f09885a5ea7a604aca167baa">_initialisation_raw_blob</a>, <span class="keyword">sizeof</span>(<a class="code" href="classAP__GPS.html#a3cd95199f09885a5ea7a604aca167baa">_initialisation_raw_blob</a>));</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="classAP__GPS.html#a90b25b2edbb127b22e597a56f2a01e42">send_blob_start</a>(instance, <a class="code" href="classAP__GPS.html#a1b88be4642982ed39abefd25e9f38003">_initialisation_blob</a>, <span class="keyword">sizeof</span>(<a class="code" href="classAP__GPS.html#a1b88be4642982ed39abefd25e9f38003">_initialisation_blob</a>));</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="classAP__GPS.html#ad4512e4952aa41566d6afb110e0fd6a1">send_blob_update</a>(instance);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="classAP__GPS.html#abc198fabf6b2db957161df55675cf805">initblob_state</a>[instance].<a class="code" href="classAP__GPS.html#a88ffa0ff28e2c65d11c8b1ced2c43760">remaining</a> == 0 &amp;&amp; <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]-&gt;available() &gt; 0</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            &amp;&amp; new_gps == NULL) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        uint8_t data = <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]-&gt;<a class="code" href="classAP__HAL_1_1Stream.html#ae42ff362cc2a7e527c22f92a3740c2ac">read</a>();</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">          running a uBlox at less than 38400 will lead to packet</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">          corruption, as we can&#39;t receive the packets in the 200ms</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">          window for 5Hz fixes. The NMEA startup message should force</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">          the uBlox into 38400 no matter what rate it is configured</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">          for.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a316eaa99b513960bd73ffc65f3ce94d3">GPS_TYPE_AUTO</a> || <a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6afb53d6f3afb17c9ce056c2ce4dbfad79">GPS_TYPE_UBLOX</a>) &amp;&amp;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <a class="code" href="AP__Progmem_8h.html#a1940138bf478b967dbe8c1b559885bd1">pgm_read_dword</a>(&amp;<a class="code" href="classAP__GPS.html#ac89218621af4ae16bce41e0fbcb8faf1">_baudrates</a>[dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a6aeb1068253a9101ac83490271057e2f">last_baud</a>]) &gt;= 38400 &amp;&amp; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <a class="code" href="classAP__GPS__UBLOX.html#abd6e355abac6f9d1914591b92298395b">AP_GPS_UBLOX::_detect</a>(dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a1f091c7a044d04d64919d7aadedf1495">ublox_detect_state</a>, data)) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            hal.<a class="code" href="classAP__HAL_1_1HAL.html#a92168462febe0f5ab9556dc9ea4ddb7a">console</a>-&gt;<a class="code" href="classAP__HAL_1_1Print.html#acfe80773011eb17dfb52c2fba517a093">print</a>(<span class="stringliteral">&quot; ublox &quot;</span>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            new_gps = <span class="keyword">new</span> <a class="code" href="classAP__GPS__UBLOX.html">AP_GPS_UBLOX</a>(*<span class="keyword">this</span>, <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance], <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        } </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a316eaa99b513960bd73ffc65f3ce94d3">GPS_TYPE_AUTO</a> || <a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a8d6520721ac1203489b975cc09ef815e">GPS_TYPE_MTK19</a>) &amp;&amp;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                 <a class="code" href="classAP__GPS__MTK19.html#ae7dd973d7154070da15101cfc9f4a58b">AP_GPS_MTK19::_detect</a>(dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a6102db4d46470019b42a5809752c82ae">mtk19_detect_state</a>, data)) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            hal.<a class="code" href="classAP__HAL_1_1HAL.html#a92168462febe0f5ab9556dc9ea4ddb7a">console</a>-&gt;<a class="code" href="classAP__HAL_1_1Print.html#acfe80773011eb17dfb52c2fba517a093">print</a>(<span class="stringliteral">&quot; MTK19 &quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            new_gps = <span class="keyword">new</span> <a class="code" href="classAP__GPS__MTK19.html">AP_GPS_MTK19</a>(*<span class="keyword">this</span>, <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance], <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        } </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a316eaa99b513960bd73ffc65f3ce94d3">GPS_TYPE_AUTO</a> || <a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a75e6abea4be518c0367016185ac3e53f">GPS_TYPE_MTK</a>) &amp;&amp;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                 <a class="code" href="classAP__GPS__MTK.html#aaaa210f0bb36cd3e6150b617418c3a92">AP_GPS_MTK::_detect</a>(dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#add10334deb707e361ad8d3ddc0eaec36">mtk_detect_state</a>, data)) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            hal.<a class="code" href="classAP__HAL_1_1HAL.html#a92168462febe0f5ab9556dc9ea4ddb7a">console</a>-&gt;<a class="code" href="classAP__HAL_1_1Print.html#acfe80773011eb17dfb52c2fba517a093">print</a>(<span class="stringliteral">&quot; MTK &quot;</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            new_gps = <span class="keyword">new</span> <a class="code" href="classAP__GPS__MTK.html">AP_GPS_MTK</a>(*<span class="keyword">this</span>, <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance], <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a316eaa99b513960bd73ffc65f3ce94d3">GPS_TYPE_AUTO</a> || <a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a755a5b90129ac93c5b947fd0430252aa">GPS_TYPE_SBP</a>) &amp;&amp;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                 <a class="code" href="classAP__GPS__SBP.html#ae1ae391d424ba0cc24b0b8b70a263bcc">AP_GPS_SBP::_detect</a>(dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a2e80a2a45e99a54129c084a0db6ec6e6">sbp_detect_state</a>, data)) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            hal.<a class="code" href="classAP__HAL_1_1HAL.html#a92168462febe0f5ab9556dc9ea4ddb7a">console</a>-&gt;<a class="code" href="classAP__HAL_1_1Print.html#acfe80773011eb17dfb52c2fba517a093">print</a>(<span class="stringliteral">&quot; SBP &quot;</span>);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            new_gps = <span class="keyword">new</span> <a class="code" href="classAP__GPS__SBP.html">AP_GPS_SBP</a>(*<span class="keyword">this</span>, <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance], <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// save a bit of code space on a 1280</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a316eaa99b513960bd73ffc65f3ce94d3">GPS_TYPE_AUTO</a> || <a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a1f0ab654d6f0fbe978f0f35438c04734">GPS_TYPE_SIRF</a>) &amp;&amp;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                 <a class="code" href="classAP__GPS__SIRF.html#a99c1e4f27c9077aaadead6cc6ad031a0">AP_GPS_SIRF::_detect</a>(dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a77c207fe0e20e8a532332e3feefe5e1a">sirf_detect_state</a>, data)) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            hal.<a class="code" href="classAP__HAL_1_1HAL.html#a92168462febe0f5ab9556dc9ea4ddb7a">console</a>-&gt;<a class="code" href="classAP__HAL_1_1Print.html#acfe80773011eb17dfb52c2fba517a093">print</a>(<span class="stringliteral">&quot; SIRF &quot;</span>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            new_gps = <span class="keyword">new</span> <a class="code" href="classAP__GPS__SIRF.html">AP_GPS_SIRF</a>(*<span class="keyword">this</span>, <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance], <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (now - dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#a6eab9f0ae0962738938c38275385ff1c">detect_started_ms</a> &gt; (<a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(<a class="code" href="classAP__GPS.html#ac89218621af4ae16bce41e0fbcb8faf1">_baudrates</a>) * <a class="code" href="AP__GPS_8h.html#a2f6d184a58b49c746340c1139bd6e0ea">GPS_BAUD_TIME_MS</a>)) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="comment">// prevent false detection of NMEA mode in</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="comment">// a MTK or UBLOX which has booted in NMEA mode</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a316eaa99b513960bd73ffc65f3ce94d3">GPS_TYPE_AUTO</a> || <a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6ae7f79347a000fb1cf52a29057a14c77d">GPS_TYPE_NMEA</a>) &amp;&amp;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                <a class="code" href="classAP__GPS__NMEA.html#a14edc53eb3e6907cba8b59832c69fd33">AP_GPS_NMEA::_detect</a>(dstate-&gt;<a class="code" href="structAP__GPS_1_1detect__state.html#ade0e499bceae920fe4d93ad1f9040776">nmea_detect_state</a>, data)) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                hal.<a class="code" href="classAP__HAL_1_1HAL.html#a92168462febe0f5ab9556dc9ea4ddb7a">console</a>-&gt;<a class="code" href="classAP__HAL_1_1Print.html#acfe80773011eb17dfb52c2fba517a093">print</a>(<span class="stringliteral">&quot; NMEA &quot;</span>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                new_gps = <span class="keyword">new</span> <a class="code" href="classAP__GPS__NMEA.html">AP_GPS_NMEA</a>(*<span class="keyword">this</span>, <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance], <a class="code" href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">_port</a>[instance]);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_PX4</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;found_gps:</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (new_gps != NULL) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__State.html#a0a8710bdc386183e8afea11565745c75">status</a> = <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca4166c675325c7b3e3e83c7c3ec1fbafb">NO_FIX</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[instance] = new_gps;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <a class="code" href="classAP__GPS.html#ab8cf24c74d281be0f8cc68fcf924a678">timing</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__timing.html#a6bbf268f8a99e5748b44975d97a5ae00">last_message_time_ms</a> = now;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fc">AP_GPS::GPS_Status</a> </div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a28239e96e836d57525366b6529b76a51">  302</a></span>&#160;<a class="code" href="classAP__GPS.html#a0a7edf82d077df0d203a0715c4fe24f5">AP_GPS::highest_supported_status</a>(uint8_t instance)<span class="keyword"> const</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[instance] != NULL)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[instance]-&gt;<a class="code" href="classAP__GPS__Backend.html#a8c5b16c4ac289e283effa184eb9df9c8">highest_supported_status</a>();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca3ea1cd30c63cf65db4a124bcd4b9fbdb">AP_GPS::GPS_OK_FIX_3D</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fc">AP_GPS::GPS_Status</a> </div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a0a7edf82d077df0d203a0715c4fe24f5">  310</a></span>&#160;<a class="code" href="classAP__GPS.html#a0a7edf82d077df0d203a0715c4fe24f5">AP_GPS::highest_supported_status</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[<a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a>] != NULL)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[<a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a>]-&gt;<a class="code" href="classAP__GPS__Backend.html#a8c5b16c4ac289e283effa184eb9df9c8">highest_supported_status</a>();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca3ea1cd30c63cf65db4a124bcd4b9fbdb">AP_GPS::GPS_OK_FIX_3D</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">  update one GPS instance. This should be called at 10Hz or greater</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a83302e8b52e5d01ae67375b3542eb460">  322</a></span>&#160;<a class="code" href="classAP__GPS.html#a83302e8b52e5d01ae67375b3542eb460">AP_GPS::update_instance</a>(uint8_t instance)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;{</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a09943533b34b8f6a3981a11329270230">GPS_TYPE_HIL</a>) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="comment">// in HIL, leave info alone</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance] == <a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6acb925988f6661c9552b576d7078f8ca1">GPS_TYPE_NONE</a>) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="comment">// not enabled</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__State.html#a0a8710bdc386183e8afea11565745c75">status</a> = <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca5eba95d16dc0519820e356de7be1362d">NO_GPS</a>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__State.html#ab346404b3a35776ea25982265c346974">hdop</a> = 9999;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#af5f34786e914886cbfe9f47cfcf2220d">locked_ports</a> &amp; (1U&lt;&lt;instance)) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="comment">// the port is locked by another driver</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[instance] == NULL || <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="classAP__GPS.html#ae306f6cf545ee9f1f61cc38301ef76ca">status</a> == <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca5eba95d16dc0519820e356de7be1362d">NO_GPS</a>) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="comment">// we don&#39;t yet know the GPS type of this one, or it has timed</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="comment">// out and needs to be re-initialised</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="classAP__GPS.html#a4bdd5c70ed358b4147a58c7d09f040dd">detect_instance</a>(instance);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="classAP__GPS.html#ad4512e4952aa41566d6afb110e0fd6a1">send_blob_update</a>(instance);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// we have an active driver for this instance</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[instance]-&gt;<a class="code" href="classAP__GPS__Backend.html#a4da5fd4a69edd3a0a393e74cc0ca391a">read</a>();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    uint32_t tnow = hal.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a26b68339fc68a562d8d3a1238d0ec8c1">millis</a>();</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// if we did not get a message, and the idle timer of 1.2 seconds</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// has expired, re-initialise the GPS. This will cause GPS</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// detection to run again</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (!result) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">if</span> (tnow - <a class="code" href="classAP__GPS.html#ab8cf24c74d281be0f8cc68fcf924a678">timing</a>[instance].<a class="code" href="classAP__GPS.html#a99be30769d9ebba8b0184a5635012198">last_message_time_ms</a> &gt; 1200) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="comment">// free the driver before we run the next detection, so we</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="comment">// don&#39;t end up with two allocated at any time</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keyword">delete</span> <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[instance];</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[instance] = NULL;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            memset(&amp;<a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance], 0, <span class="keyword">sizeof</span>(<a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance]));</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__State.html#a95606c520bd395452a6e171828a4988d">instance</a> = instance;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__State.html#a0a8710bdc386183e8afea11565745c75">status</a> = <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca5eba95d16dc0519820e356de7be1362d">NO_GPS</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__State.html#ab346404b3a35776ea25982265c346974">hdop</a> = 9999;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <a class="code" href="classAP__GPS.html#ab8cf24c74d281be0f8cc68fcf924a678">timing</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__timing.html#a6bbf268f8a99e5748b44975d97a5ae00">last_message_time_ms</a> = tnow;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <a class="code" href="classAP__GPS.html#ab8cf24c74d281be0f8cc68fcf924a678">timing</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__timing.html#a6bbf268f8a99e5748b44975d97a5ae00">last_message_time_ms</a> = tnow;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance].<a class="code" href="classAP__GPS.html#ae306f6cf545ee9f1f61cc38301ef76ca">status</a> &gt;= <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca039c0783250f3296425dfc7b53bbdbff">GPS_OK_FIX_2D</a>) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <a class="code" href="classAP__GPS.html#ab8cf24c74d281be0f8cc68fcf924a678">timing</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__timing.html#a196a0fde4a1ac10bc27977eb60d69e4e">last_fix_time_ms</a> = tnow;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">  update all GPS instances</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="classAP__GPS.html#afe04427a47ab5e630cb979815abd911e">  379</a></span>&#160;<a class="code" href="classAP__GPS.html#afe04427a47ab5e630cb979815abd911e">AP_GPS::update</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">for</span> (uint8_t <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="AP__GPS_8h.html#a3a734b4d4de7ca88c6563a5a476e3e87">GPS_MAX_INSTANCES</a>; <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="classAP__GPS.html#a83302e8b52e5d01ae67375b3542eb460">update_instance</a>(<a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// work out which GPS is the primary, and how many sensors we have</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">for</span> (uint8_t <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="AP__GPS_8h.html#a3a734b4d4de7ca88c6563a5a476e3e87">GPS_MAX_INSTANCES</a>; <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="classAP__GPS.html#ae306f6cf545ee9f1f61cc38301ef76ca">status</a> != <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca5eba95d16dc0519820e356de7be1362d">NO_GPS</a>) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <a class="code" href="classAP__GPS.html#a2632887b489c6de665ca309836a443f7">num_instances</a> = <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>+1;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a6ea12f82bdeac194c101ce53c5ebf6bd">_auto_switch</a>) {            </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a>) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="classAP__GPS.html#ae306f6cf545ee9f1f61cc38301ef76ca">status</a> &gt; <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[<a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a>].<a class="code" href="classAP__GPS.html#ae306f6cf545ee9f1f61cc38301ef76ca">status</a>) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <span class="comment">// we have a higher status lock, change GPS</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                <a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a> = <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordtype">bool</span> another_gps_has_1_or_more_sats = (<a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structAP__GPS_1_1GPS__State.html#a13d2ae016510be58fa8054f7d130d944">num_sats</a> &gt;= <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[<a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a>].<a class="code" href="structAP__GPS_1_1GPS__State.html#a13d2ae016510be58fa8054f7d130d944">num_sats</a> + 1);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].status == <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[<a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a>].status &amp;&amp; another_gps_has_1_or_more_sats) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                uint32_t now = hal.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a26b68339fc68a562d8d3a1238d0ec8c1">millis</a>();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                <span class="keywordtype">bool</span> another_gps_has_2_or_more_sats = (<a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structAP__GPS_1_1GPS__State.html#a13d2ae016510be58fa8054f7d130d944">num_sats</a> &gt;= <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[<a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a>].<a class="code" href="structAP__GPS_1_1GPS__State.html#a13d2ae016510be58fa8054f7d130d944">num_sats</a> + 2);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                <span class="keywordflow">if</span> ( (another_gps_has_1_or_more_sats &amp;&amp; (now - <a class="code" href="classAP__GPS.html#ac72f28687a306b821da873c6b2145241">_last_instance_swap_ms</a>) &gt;= 20000) ||</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                     (another_gps_has_2_or_more_sats &amp;&amp; (now - <a class="code" href="classAP__GPS.html#ac72f28687a306b821da873c6b2145241">_last_instance_swap_ms</a>) &gt;= 5000 ) ) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <span class="comment">// this GPS has more satellites than the</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                <span class="comment">// current primary, switch primary. Once we switch we will</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="comment">// then tend to stick to the new GPS as primary. We don&#39;t</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                <span class="comment">// want to switch too often as it will look like a</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                <span class="comment">// position shift to the controllers.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                <a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a> = <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                <a class="code" href="classAP__GPS.html#ac72f28687a306b821da873c6b2145241">_last_instance_swap_ms</a> = now;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a> = 0;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// update notify with gps status. We always base this on the primary_instance</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="classAP__Notify.html#a5e04fe88ef01c72de62613e7a30e0c61">AP_Notify::flags</a>.<a class="code" href="structAP__Notify_1_1notify__flags__type.html#a6e087868faad63754fe6603a3a83e8bc">gps_status</a> = <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[<a class="code" href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">primary_instance</a>].<a class="code" href="structAP__GPS_1_1GPS__State.html#a0a8710bdc386183e8afea11565745c75">status</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">  set HIL (hardware in the loop) status for a GPS instance</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="keywordtype">void</span> </div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a5c53cf2e41f3fcf833c74a77a3cc00ec">  431</a></span>&#160;<a class="code" href="classAP__GPS.html#a5c53cf2e41f3fcf833c74a77a3cc00ec">AP_GPS::setHIL</a>(uint8_t instance, <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fc">GPS_Status</a> _status, uint64_t time_epoch_ms, </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;               <span class="keyword">const</span> <a class="code" href="structLocation.html">Location</a> &amp;_location, <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;_velocity, uint8_t _num_sats, </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;               uint16_t hdop, <span class="keywordtype">bool</span> _have_vertical_velocity)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span> (instance &gt;= <a class="code" href="AP__GPS_8h.html#a3a734b4d4de7ca88c6563a5a476e3e87">GPS_MAX_INSTANCES</a>) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    uint32_t tnow = hal.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a26b68339fc68a562d8d3a1238d0ec8c1">millis</a>();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="structAP__GPS_1_1GPS__State.html">GPS_State</a> &amp;istate = <a class="code" href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">state</a>[instance];</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a0a8710bdc386183e8afea11565745c75">status</a> = _status;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a20e1b00d3fc64a8dae7a39c3763cfa08">location</a> = _location;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a20e1b00d3fc64a8dae7a39c3763cfa08">location</a>.<a class="code" href="structLocation.html#a0269ea73231e6acc0acd8fb977c602ff">options</a> = 0;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a583c2c58093b9c2ce6abcb0fa9be2c79">velocity</a> = _velocity;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#aa6b54a6f8a46a0418ae505a45480ff45">ground_speed</a> = <a class="code" href="AP__Math_8h.html#a4a065531591469723bec18f9034a91c3">pythagorous2</a>(istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a583c2c58093b9c2ce6abcb0fa9be2c79">velocity</a>.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>, istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a583c2c58093b9c2ce6abcb0fa9be2c79">velocity</a>.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a6ebfff55d1a2a643e0aadc6aeca054e8">ground_course_cd</a> = <a class="code" href="AP__Math_8h.html#aec935e3ce7fb13099565b27693547d09">wrap_360_cd</a>(<a class="code" href="AP__Math_8h.html#a420f396aeb3fce0177dead408c1c2da2">degrees</a>(atan2f(istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a583c2c58093b9c2ce6abcb0fa9be2c79">velocity</a>.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>, istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a583c2c58093b9c2ce6abcb0fa9be2c79">velocity</a>.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>)) * 100UL);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#ab346404b3a35776ea25982265c346974">hdop</a> = hdop;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a13d2ae016510be58fa8054f7d130d944">num_sats</a> = _num_sats;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#ab8bec1358e2740e4d76f60d1f8545130">have_vertical_velocity</a> |= _have_vertical_velocity;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a3fa38b751ea5cb9c140a2fc61ae6f568">last_gps_time_ms</a> = tnow;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    uint64_t gps_time_ms = time_epoch_ms - (17000ULL*86400ULL + 52*10*7000ULL*86400ULL - 15000ULL);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a1deb41c0495c03263d4a900c09cd5bc8">time_week</a>     = gps_time_ms / (86400*7*(uint64_t)1000);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a7f5493cb75218bca4a13c125f546c8af">time_week_ms</a>  = gps_time_ms - istate.<a class="code" href="structAP__GPS_1_1GPS__State.html#a1deb41c0495c03263d4a900c09cd5bc8">time_week</a>*(86400*7*(uint64_t)1000);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="classAP__GPS.html#ab8cf24c74d281be0f8cc68fcf924a678">timing</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__timing.html#a6bbf268f8a99e5748b44975d97a5ae00">last_message_time_ms</a> = tnow;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="classAP__GPS.html#ab8cf24c74d281be0f8cc68fcf924a678">timing</a>[instance].<a class="code" href="structAP__GPS_1_1GPS__timing.html#a196a0fde4a1ac10bc27977eb60d69e4e">last_fix_time_ms</a> = tnow;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">_type</a>[instance].set(<a class="code" href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a09943533b34b8f6a3981a11329270230">GPS_TYPE_HIL</a>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="keywordtype">void</span> </div>
<div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a27bb197524818a82bd813d22a6b0c1b5">  464</a></span>&#160;<a class="code" href="classAP__GPS.html#a27bb197524818a82bd813d22a6b0c1b5">AP_GPS::lock_port</a>(uint8_t instance, <span class="keywordtype">bool</span> lock)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;{</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (instance &gt;= <a class="code" href="AP__GPS_8h.html#a3a734b4d4de7ca88c6563a5a476e3e87">GPS_MAX_INSTANCES</a>) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (lock) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <a class="code" href="classAP__GPS.html#af5f34786e914886cbfe9f47cfcf2220d">locked_ports</a> |= (1U&lt;&lt;instance);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="classAP__GPS.html#af5f34786e914886cbfe9f47cfcf2220d">locked_ports</a> &amp;= ~(1U&lt;&lt;instance);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">//Inject a packet of raw binary to a GPS</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="keywordtype">void</span> </div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a55e6933a759c01c398bb9f5a74ad50e2">  479</a></span>&#160;<a class="code" href="classAP__GPS.html#a55e6933a759c01c398bb9f5a74ad50e2">AP_GPS::inject_data</a>(uint8_t *data, uint8_t len)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;{</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">//Support broadcasting to all GPSes.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a5c43f8a7049939c439960e2d5431b09b">_inject_to</a> == <a class="code" href="AP__GPS_8h.html#af476b309d3827917a4217a393c7bb6ed">GPS_RTK_INJECT_TO_ALL</a>) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">for</span> (uint8_t <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="AP__GPS_8h.html#a3a734b4d4de7ca88c6563a5a476e3e87">GPS_MAX_INSTANCES</a>; <a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <a class="code" href="classAP__GPS.html#a55e6933a759c01c398bb9f5a74ad50e2">inject_data</a>(<a class="code" href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>, data, len);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <a class="code" href="classAP__GPS.html#a55e6933a759c01c398bb9f5a74ad50e2">inject_data</a>(<a class="code" href="classAP__GPS.html#a5c43f8a7049939c439960e2d5431b09b">_inject_to</a>, data, len);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="keywordtype">void</span> </div>
<div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="classAP__GPS.html#afd3988fee68e9f7f884963c809a138d9">  492</a></span>&#160;<a class="code" href="classAP__GPS.html#a55e6933a759c01c398bb9f5a74ad50e2">AP_GPS::inject_data</a>(uint8_t instance, uint8_t *data, uint8_t len)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span> (instance &lt; <a class="code" href="AP__GPS_8h.html#a3a734b4d4de7ca88c6563a5a476e3e87">GPS_MAX_INSTANCES</a> &amp;&amp; <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[instance] != NULL)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[instance]-&gt;<a class="code" href="classAP__GPS__Backend.html#a538a6830526812cae5089fd45a2b60d6">inject_data</a>(data, len);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}  </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="keywordtype">void</span> </div>
<div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a266ef4a39f7a303fc1905bf7f9e4ed09">  499</a></span>&#160;<a class="code" href="classAP__GPS.html#a266ef4a39f7a303fc1905bf7f9e4ed09">AP_GPS::send_mavlink_gps_raw</a>(<a class="code" href="mavlink__types_8h.html#aa0f38d2f21462ce9ff37bfb2fb43709c">mavlink_channel_t</a> chan)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keyword">static</span> uint32_t last_send_time_ms[<a class="code" href="GCS__MAVLink_8h.html#aff625e94451bf446bdd56f5d0e081077">MAVLINK_COMM_NUM_BUFFERS</a>];</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#ae306f6cf545ee9f1f61cc38301ef76ca">status</a>(0) &gt; <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca5eba95d16dc0519820e356de7be1362d">AP_GPS::NO_GPS</a>) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="comment">// when we have a GPS then only send new data</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">if</span> (last_send_time_ms[chan] == <a class="code" href="classAP__GPS.html#a99be30769d9ebba8b0184a5635012198">last_message_time_ms</a>(0)) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        last_send_time_ms[chan] = <a class="code" href="classAP__GPS.html#a99be30769d9ebba8b0184a5635012198">last_message_time_ms</a>(0);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="comment">// when we don&#39;t have a GPS then send at 1Hz</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        uint32_t now = hal.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a26b68339fc68a562d8d3a1238d0ec8c1">millis</a>();</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">if</span> (now - last_send_time_ms[chan] &lt; 1000) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        last_send_time_ms[chan] = now;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keyword">const</span> <a class="code" href="structLocation.html">Location</a> &amp;loc = <a class="code" href="classAP__GPS.html#a98307dafca6849d38b983258a0ab361c">location</a>(0);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    mavlink_msg_gps_raw_int_send(</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        chan,</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <a class="code" href="classAP__GPS.html#ad9057eb7d0fa2a0fcf39fee4d2d1036b">last_fix_time_ms</a>(0)*(uint64_t)1000,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <a class="code" href="classAP__GPS.html#ae306f6cf545ee9f1f61cc38301ef76ca">status</a>(0),</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        loc.<a class="code" href="structLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a>,        <span class="comment">// in 1E7 degrees</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        loc.<a class="code" href="structLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a>,        <span class="comment">// in 1E7 degrees</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        loc.<a class="code" href="structLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a> * 10UL, <span class="comment">// in mm</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <a class="code" href="classAP__GPS.html#a4e2f4adf4afb5c25bcf8cea537ec1221">get_hdop</a>(0),</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <a class="code" href="classAP__GPS.html#aff725a10762e8edc0871c522c0f7cfac">get_vdop</a>(0),</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <a class="code" href="classAP__GPS.html#a7424d6be88b259250ee31e9897f98f36">ground_speed</a>(0)*100,  <span class="comment">// cm/s</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="classAP__GPS.html#adfa5cff731a1b7f144b521083d056671">ground_course_cd</a>(0), <span class="comment">// 1/100 degrees,</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <a class="code" href="classAP__GPS.html#afcc2442ab71102ddabde55e6fb58bf0a">num_sats</a>(0));</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="keywordtype">void</span> </div>
<div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a559c00ff3bbc1232f68e64d29a892128">  532</a></span>&#160;<a class="code" href="classAP__GPS.html#a559c00ff3bbc1232f68e64d29a892128">AP_GPS::send_mavlink_gps2_raw</a>(<a class="code" href="mavlink__types_8h.html#aa0f38d2f21462ce9ff37bfb2fb43709c">mavlink_channel_t</a> chan)</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;{</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keyword">static</span> uint32_t last_send_time_ms[<a class="code" href="GCS__MAVLink_8h.html#aff625e94451bf446bdd56f5d0e081077">MAVLINK_COMM_NUM_BUFFERS</a>];</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#ab9242bd37b2fccdfbb76b42d9ea4a302">num_sensors</a>() &lt; 2 || <a class="code" href="classAP__GPS.html#ae306f6cf545ee9f1f61cc38301ef76ca">status</a>(1) &lt;= <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca5eba95d16dc0519820e356de7be1362d">AP_GPS::NO_GPS</a>) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">// when we have a GPS then only send new data</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">if</span> (last_send_time_ms[chan] == <a class="code" href="classAP__GPS.html#a99be30769d9ebba8b0184a5635012198">last_message_time_ms</a>(1)) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    last_send_time_ms[chan] = <a class="code" href="classAP__GPS.html#a99be30769d9ebba8b0184a5635012198">last_message_time_ms</a>(1);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keyword">const</span> <a class="code" href="structLocation.html">Location</a> &amp;loc = <a class="code" href="classAP__GPS.html#a98307dafca6849d38b983258a0ab361c">location</a>(1);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    mavlink_msg_gps2_raw_send(</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        chan,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <a class="code" href="classAP__GPS.html#ad9057eb7d0fa2a0fcf39fee4d2d1036b">last_fix_time_ms</a>(1)*(uint64_t)1000,</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="classAP__GPS.html#ae306f6cf545ee9f1f61cc38301ef76ca">status</a>(1),</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        loc.<a class="code" href="structLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a>,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        loc.<a class="code" href="structLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a>,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        loc.<a class="code" href="structLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a> * 10UL,</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <a class="code" href="classAP__GPS.html#a4e2f4adf4afb5c25bcf8cea537ec1221">get_hdop</a>(1),</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <a class="code" href="classAP__GPS.html#aff725a10762e8edc0871c522c0f7cfac">get_vdop</a>(1),</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="classAP__GPS.html#a7424d6be88b259250ee31e9897f98f36">ground_speed</a>(1)*100,  <span class="comment">// cm/s</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <a class="code" href="classAP__GPS.html#adfa5cff731a1b7f144b521083d056671">ground_course_cd</a>(1), <span class="comment">// 1/100 degrees,</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <a class="code" href="classAP__GPS.html#afcc2442ab71102ddabde55e6fb58bf0a">num_sats</a>(1),</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        0,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        0);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="keywordtype">void</span> </div>
<div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a893afa3379d08489d3d13ec23a9e058f">  562</a></span>&#160;<a class="code" href="classAP__GPS.html#a893afa3379d08489d3d13ec23a9e058f">AP_GPS::send_mavlink_gps_rtk</a>(<a class="code" href="mavlink__types_8h.html#aa0f38d2f21462ce9ff37bfb2fb43709c">mavlink_channel_t</a> chan)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;{</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[0] != NULL &amp;&amp; <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[0]-&gt;<a class="code" href="classAP__GPS.html#a0a7edf82d077df0d203a0715c4fe24f5">highest_supported_status</a>() &gt; <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca3ea1cd30c63cf65db4a124bcd4b9fbdb">AP_GPS::GPS_OK_FIX_3D</a>) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[0]-&gt;<a class="code" href="classAP__GPS__Backend.html#a21ecae803fa5c6eaa9bc257840ce7031">send_mavlink_gps_rtk</a>(chan);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="keywordtype">void</span> </div>
<div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="classAP__GPS.html#a04d3ce24fb1734450132878a154cf70d">  570</a></span>&#160;<a class="code" href="classAP__GPS.html#a04d3ce24fb1734450132878a154cf70d">AP_GPS::send_mavlink_gps2_rtk</a>(<a class="code" href="mavlink__types_8h.html#aa0f38d2f21462ce9ff37bfb2fb43709c">mavlink_channel_t</a> chan)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;{</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[1] != NULL &amp;&amp; <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[1]-&gt;<a class="code" href="classAP__GPS.html#a0a7edf82d077df0d203a0715c4fe24f5">highest_supported_status</a>() &gt; <a class="code" href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca3ea1cd30c63cf65db4a124bcd4b9fbdb">AP_GPS::GPS_OK_FIX_3D</a>) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">drivers</a>[1]-&gt;<a class="code" href="classAP__GPS__Backend.html#a21ecae803fa5c6eaa9bc257840ce7031">send_mavlink_gps_rtk</a>(chan);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div>
<div class="ttc" id="structAP__GPS_1_1GPS__timing_html_a6bbf268f8a99e5748b44975d97a5ae00"><div class="ttname"><a href="structAP__GPS_1_1GPS__timing.html#a6bbf268f8a99e5748b44975d97a5ae00">AP_GPS::GPS_timing::last_message_time_ms</a></div><div class="ttdeci">uint32_t last_message_time_ms</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00346">AP_GPS.h:346</a></div></div>
<div class="ttc" id="classAP__GPS_html"><div class="ttname"><a href="classAP__GPS.html">AP_GPS</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00042">AP_GPS.h:42</a></div></div>
<div class="ttc" id="classAP__GPS_html_a893afa3379d08489d3d13ec23a9e058f"><div class="ttname"><a href="classAP__GPS.html#a893afa3379d08489d3d13ec23a9e058f">AP_GPS::send_mavlink_gps_rtk</a></div><div class="ttdeci">void send_mavlink_gps_rtk(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00562">AP_GPS.cpp:562</a></div></div>
<div class="ttc" id="classAP__GPS_html_a88ffa0ff28e2c65d11c8b1ced2c43760"><div class="ttname"><a href="classAP__GPS.html#a88ffa0ff28e2c65d11c8b1ced2c43760">AP_GPS::remaining</a></div><div class="ttdeci">uint16_t remaining</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00377">AP_GPS.h:377</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_a7f5493cb75218bca4a13c125f546c8af"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#a7f5493cb75218bca4a13c125f546c8af">AP_GPS::GPS_State::time_week_ms</a></div><div class="ttdeci">uint32_t time_week_ms</div><div class="ttdoc">GPS time (milliseconds from start of GPS week) </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00107">AP_GPS.h:107</a></div></div>
<div class="ttc" id="classAP__GPS_html_a90b25b2edbb127b22e597a56f2a01e42"><div class="ttname"><a href="classAP__GPS.html#a90b25b2edbb127b22e597a56f2a01e42">AP_GPS::send_blob_start</a></div><div class="ttdeci">void send_blob_start(uint8_t instance, const char *_blob, uint16_t size)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00145">AP_GPS.cpp:145</a></div></div>
<div class="ttc" id="AHRS__Test_8cpp_html_a90ddf96040cbf0429052dafd4fa64c12"><div class="ttname"><a href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a></div><div class="ttdeci">AP_SerialManager serial_manager</div><div class="ttdef"><b>Definition:</b> <a href="AHRS__Test_8cpp_source.html#l00021">AHRS_Test.cpp:21</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6a09943533b34b8f6a3981a11329270230"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a09943533b34b8f6a3981a11329270230">AP_GPS::GPS_TYPE_HIL</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00067">AP_GPS.h:67</a></div></div>
<div class="ttc" id="classAP__GPS__Backend_html_a8c5b16c4ac289e283effa184eb9df9c8"><div class="ttname"><a href="classAP__GPS__Backend.html#a8c5b16c4ac289e283effa184eb9df9c8">AP_GPS_Backend::highest_supported_status</a></div><div class="ttdeci">virtual AP_GPS::GPS_Status highest_supported_status(void)</div><div class="ttdef"><b>Definition:</b> <a href="GPS__Backend_8h_source.html#l00044">GPS_Backend.h:44</a></div></div>
<div class="ttc" id="classAP__GPS_html_af5f34786e914886cbfe9f47cfcf2220d"><div class="ttname"><a href="classAP__GPS.html#af5f34786e914886cbfe9f47cfcf2220d">AP_GPS::locked_ports</a></div><div class="ttdeci">uint8_t locked_ports</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00360">AP_GPS.h:360</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Stream_html_a7028834212873394e906bcaf7f4a06b3"><div class="ttname"><a href="classAP__HAL_1_1Stream.html#a7028834212873394e906bcaf7f4a06b3">AP_HAL::Stream::txspace</a></div><div class="ttdeci">virtual int16_t txspace()=0</div></div>
<div class="ttc" id="structAP__GPS_1_1detect__state_html_ade0e499bceae920fe4d93ad1f9040776"><div class="ttname"><a href="structAP__GPS_1_1detect__state.html#ade0e499bceae920fe4d93ad1f9040776">AP_GPS::detect_state::nmea_detect_state</a></div><div class="ttdeci">struct NMEA_detect_state nmea_detect_state</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00371">AP_GPS.h:371</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Scheduler_html_a26b68339fc68a562d8d3a1238d0ec8c1"><div class="ttname"><a href="classAP__HAL_1_1Scheduler.html#a26b68339fc68a562d8d3a1238d0ec8c1">AP_HAL::Scheduler::millis</a></div><div class="ttdeci">virtual uint32_t millis()=0</div></div>
<div class="ttc" id="structAP__GPS_1_1detect__state_html_a2e80a2a45e99a54129c084a0db6ec6e6"><div class="ttname"><a href="structAP__GPS_1_1detect__state.html#a2e80a2a45e99a54129c084a0db6ec6e6">AP_GPS::detect_state::sbp_detect_state</a></div><div class="ttdeci">struct SBP_detect_state sbp_detect_state</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00372">AP_GPS.h:372</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6a76a222d514c32a4bc7cb319b4572bb41"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a76a222d514c32a4bc7cb319b4572bb41">AP_GPS::GPS_TYPE_GSOF</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00071">AP_GPS.h:71</a></div></div>
<div class="ttc" id="classAP__GPS_html_a58a05f48dce64267c71558d39b7917e9"><div class="ttname"><a href="classAP__GPS.html#a58a05f48dce64267c71558d39b7917e9">AP_GPS::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00303">AP_GPS.h:303</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_a3fa38b751ea5cb9c140a2fc61ae6f568"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#a3fa38b751ea5cb9c140a2fc61ae6f568">AP_GPS::GPS_State::last_gps_time_ms</a></div><div class="ttdeci">uint32_t last_gps_time_ms</div><div class="ttdoc">the system time we got the last GPS timestamp, milliseconds </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00123">AP_GPS.h:123</a></div></div>
<div class="ttc" id="classAP__GPS_html_adfa5cff731a1b7f144b521083d056671"><div class="ttname"><a href="classAP__GPS.html#adfa5cff731a1b7f144b521083d056671">AP_GPS::ground_course_cd</a></div><div class="ttdeci">int32_t ground_course_cd() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00219">AP_GPS.h:219</a></div></div>
<div class="ttc" id="classAP__HAL_1_1UARTDriver_html_acd5e319d580fe14755931d37b5d4deafa67a3cf106c9c7c7d6e454a7a9610a7d8"><div class="ttname"><a href="classAP__HAL_1_1UARTDriver.html#acd5e319d580fe14755931d37b5d4deafa67a3cf106c9c7c7d6e454a7a9610a7d8">AP_HAL::UARTDriver::FLOW_CONTROL_DISABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="UARTDriver_8h_source.html#l00045">UARTDriver.h:45</a></div></div>
<div class="ttc" id="classAP__GPS__Backend_html"><div class="ttname"><a href="classAP__GPS__Backend.html">AP_GPS_Backend</a></div><div class="ttdef"><b>Definition:</b> <a href="GPS__Backend_8h_source.html#l00026">GPS_Backend.h:26</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_a95606c520bd395452a6e171828a4988d"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#a95606c520bd395452a6e171828a4988d">AP_GPS::GPS_State::instance</a></div><div class="ttdeci">uint8_t instance</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00103">AP_GPS.h:103</a></div></div>
<div class="ttc" id="classAP__GPS_html_a7424d6be88b259250ee31e9897f98f36"><div class="ttname"><a href="classAP__GPS.html#a7424d6be88b259250ee31e9897f98f36">AP_GPS::ground_speed</a></div><div class="ttdeci">float ground_speed() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00206">AP_GPS.h:206</a></div></div>
<div class="ttc" id="classAP__SerialManager_html"><div class="ttname"><a href="classAP__SerialManager.html">AP_SerialManager</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8h_source.html#l00070">AP_SerialManager.h:70</a></div></div>
<div class="ttc" id="classAP__GPS__PX4_html"><div class="ttname"><a href="classAP__GPS__PX4.html">AP_GPS_PX4</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__PX4_8h_source.html#l00029">AP_GPS_PX4.h:29</a></div></div>
<div class="ttc" id="classAP__GPS_html_a4bdd5c70ed358b4147a58c7d09f040dd"><div class="ttname"><a href="classAP__GPS.html#a4bdd5c70ed358b4147a58c7d09f040dd">AP_GPS::detect_instance</a></div><div class="ttdeci">void detect_instance(uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00183">AP_GPS.cpp:183</a></div></div>
<div class="ttc" id="AP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html_a92168462febe0f5ab9556dc9ea4ddb7a"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a92168462febe0f5ab9556dc9ea4ddb7a">AP_HAL::HAL::console</a></div><div class="ttdeci">AP_HAL::UARTDriver * console</div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00083">HAL.h:83</a></div></div>
<div class="ttc" id="classAP__HAL_1_1UARTDriver_html_a2a83124757f6f8f6eb4d25b11c9cb97e"><div class="ttname"><a href="classAP__HAL_1_1UARTDriver.html#a2a83124757f6f8f6eb4d25b11c9cb97e">AP_HAL::UARTDriver::begin</a></div><div class="ttdeci">virtual void begin(uint32_t baud)=0</div></div>
<div class="ttc" id="AP__Param_8h_html_abe1c2a65ce5455bf37f3c000b4241c00"><div class="ttname"><a href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, class, element, def)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00046">AP_Param.h:46</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Print_html_acfe80773011eb17dfb52c2fba517a093"><div class="ttname"><a href="classAP__HAL_1_1Print.html#acfe80773011eb17dfb52c2fba517a093">AP_HAL::Print::print</a></div><div class="ttdeci">size_t print(const char[])</div><div class="ttdef"><b>Definition:</b> <a href="Print_8cpp_source.html#l00032">Print.cpp:32</a></div></div>
<div class="ttc" id="GCS__Console_2examples_2Console_2Console_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="GCS__Console_2examples_2Console_2Console_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Console_2examples_2Console_2Console_8cpp_source.html#l00055">Console.cpp:55</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_a0a8710bdc386183e8afea11565745c75"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#a0a8710bdc386183e8afea11565745c75">AP_GPS::GPS_State::status</a></div><div class="ttdeci">GPS_Status status</div><div class="ttdoc">driver fix status </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00106">AP_GPS.h:106</a></div></div>
<div class="ttc" id="classAP__GPS_html_a5c43f8a7049939c439960e2d5431b09b"><div class="ttname"><a href="classAP__GPS.html#a5c43f8a7049939c439960e2d5431b09b">AP_GPS::_inject_to</a></div><div class="ttdeci">AP_Int8 _inject_to</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00314">AP_GPS.h:314</a></div></div>
<div class="ttc" id="AP__GPS_8cpp_html_ae08c3ca4ba26b63cda0bb3e3c6c02785"><div class="ttname"><a href="AP__GPS_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdoc">-*- tab-width: 4; Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil -*- </div><div class="ttdef"><b>Definition:</b> <a href="AC__PID__test_8cpp_source.html#l00010">AC_PID_test.cpp:10</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_ab8bec1358e2740e4d76f60d1f8545130"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#ab8bec1358e2740e4d76f60d1f8545130">AP_GPS::GPS_State::have_vertical_velocity</a></div><div class="ttdeci">bool have_vertical_velocity</div><div class="ttdoc">does this GPS give vertical velocity? </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00119">AP_GPS.h:119</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_a583c2c58093b9c2ce6abcb0fa9be2c79"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#a583c2c58093b9c2ce6abcb0fa9be2c79">AP_GPS::GPS_State::velocity</a></div><div class="ttdeci">Vector3f velocity</div><div class="ttdoc">3D velocitiy in m/s, in NED format </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00115">AP_GPS.h:115</a></div></div>
<div class="ttc" id="AP__GPS_8h_html_a2f6d184a58b49c746340c1139bd6e0ea"><div class="ttname"><a href="AP__GPS_8h.html#a2f6d184a58b49c746340c1139bd6e0ea">GPS_BAUD_TIME_MS</a></div><div class="ttdeci">#define GPS_BAUD_TIME_MS</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00388">AP_GPS.h:388</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html">AP_GPS::GPS_State</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00102">AP_GPS.h:102</a></div></div>
<div class="ttc" id="classAP__GPS_html_adbcf012c3f5dec8af367ee6b5e025573"><div class="ttname"><a href="classAP__GPS.html#adbcf012c3f5dec8af367ee6b5e025573">AP_GPS::primary_instance</a></div><div class="ttdeci">uint8_t primary_instance</div><div class="ttdoc">primary GPS instance </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00354">AP_GPS.h:354</a></div></div>
<div class="ttc" id="classAP__GPS_html_a559c00ff3bbc1232f68e64d29a892128"><div class="ttname"><a href="classAP__GPS.html#a559c00ff3bbc1232f68e64d29a892128">AP_GPS::send_mavlink_gps2_raw</a></div><div class="ttdeci">void send_mavlink_gps2_raw(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00532">AP_GPS.cpp:532</a></div></div>
<div class="ttc" id="AP__Progmem_8h_html_a1940138bf478b967dbe8c1b559885bd1"><div class="ttname"><a href="AP__Progmem_8h.html#a1940138bf478b967dbe8c1b559885bd1">pgm_read_dword</a></div><div class="ttdeci">static uint32_t pgm_read_dword(const void *s)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Progmem_8h_source.html#l00022">AP_Progmem.h:22</a></div></div>
<div class="ttc" id="classAP__GPS_html_a27bb197524818a82bd813d22a6b0c1b5"><div class="ttname"><a href="classAP__GPS.html#a27bb197524818a82bd813d22a6b0c1b5">AP_GPS::lock_port</a></div><div class="ttdeci">void lock_port(uint8_t instance, bool locked)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00464">AP_GPS.cpp:464</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_af80d1e798f50bcd4ffcff2f3313e3950"><div class="ttname"><a href="classAP__SerialManager.html#af80d1e798f50bcd4ffcff2f3313e3950">AP_SerialManager::find_serial</a></div><div class="ttdeci">AP_HAL::UARTDriver * find_serial(enum SerialProtocol protocol, uint8_t instance) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8cpp_source.html#l00178">AP_SerialManager.cpp:178</a></div></div>
<div class="ttc" id="AP__GPS__UBLOX_8h_html_ab01245792ac1376be9de89e35cdc6690"><div class="ttname"><a href="AP__GPS__UBLOX_8h.html#ab01245792ac1376be9de89e35cdc6690">UBLOX_SET_BINARY</a></div><div class="ttdeci">#define UBLOX_SET_BINARY</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__UBLOX_8h_source.html#l00041">AP_GPS_UBLOX.h:41</a></div></div>
<div class="ttc" id="AP__Progmem_8h_html_a1514e0408e036062b4af844baaf567da"><div class="ttname"><a href="AP__Progmem_8h.html#a1514e0408e036062b4af844baaf567da">pgm_read_byte</a></div><div class="ttdeci">static uint8_t pgm_read_byte(const void *s)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Progmem_8h_source.html#l00007">AP_Progmem.h:7</a></div></div>
<div class="ttc" id="classAP__GPS_html_a823851040451dad3c3b449aaff655cf7"><div class="ttname"><a href="classAP__GPS.html#a823851040451dad3c3b449aaff655cf7">AP_GPS::_DataFlash</a></div><div class="ttdeci">DataFlash_Class * _DataFlash</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00306">AP_GPS.h:306</a></div></div>
<div class="ttc" id="classAP__GPS_html_a7a2a3f30880eb409b3903c56ba58aaae"><div class="ttname"><a href="classAP__GPS.html#a7a2a3f30880eb409b3903c56ba58aaae">AP_GPS::_port</a></div><div class="ttdeci">AP_HAL::UARTDriver * _port[GPS_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00351">AP_GPS.h:351</a></div></div>
<div class="ttc" id="AP__GPS__MTK__Common_8h_html_a33cc37eaf57637b4b2476d9efcf6611a"><div class="ttname"><a href="AP__GPS__MTK__Common_8h.html#a33cc37eaf57637b4b2476d9efcf6611a">MTK_SET_BINARY</a></div><div class="ttdeci">#define MTK_SET_BINARY</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__MTK__Common_8h_source.html#l00026">AP_GPS_MTK_Common.h:26</a></div></div>
<div class="ttc" id="classAP__GPS_html_a55e6933a759c01c398bb9f5a74ad50e2"><div class="ttname"><a href="classAP__GPS.html#a55e6933a759c01c398bb9f5a74ad50e2">AP_GPS::inject_data</a></div><div class="ttdeci">void inject_data(uint8_t *data, uint8_t len)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00479">AP_GPS.cpp:479</a></div></div>
<div class="ttc" id="AP__GPS_8h_html_af476b309d3827917a4217a393c7bb6ed"><div class="ttname"><a href="AP__GPS_8h.html#af476b309d3827917a4217a393c7bb6ed">GPS_RTK_INJECT_TO_ALL</a></div><div class="ttdeci">#define GPS_RTK_INJECT_TO_ALL</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00035">AP_GPS.h:35</a></div></div>
<div class="ttc" id="AP__Progmem_8h_html"><div class="ttname"><a href="AP__Progmem_8h.html">AP_Progmem.h</a></div></div>
<div class="ttc" id="classAP__GPS__NMEA_html_a14edc53eb3e6907cba8b59832c69fd33"><div class="ttname"><a href="classAP__GPS__NMEA.html#a14edc53eb3e6907cba8b59832c69fd33">AP_GPS_NMEA::_detect</a></div><div class="ttdeci">static bool _detect(struct NMEA_detect_state &amp;state, uint8_t data)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__NMEA_8cpp_source.html#l00432">AP_GPS_NMEA.cpp:432</a></div></div>
<div class="ttc" id="AP__Math_8h_html_a4a065531591469723bec18f9034a91c3"><div class="ttname"><a href="AP__Math_8h.html#a4a065531591469723bec18f9034a91c3">pythagorous2</a></div><div class="ttdeci">static float pythagorous2(float a, float b)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00210">AP_Math.h:210</a></div></div>
<div class="ttc" id="classAP__GPS_html_a99be30769d9ebba8b0184a5635012198"><div class="ttname"><a href="classAP__GPS.html#a99be30769d9ebba8b0184a5635012198">AP_GPS::last_message_time_ms</a></div><div class="ttdeci">uint32_t last_message_time_ms(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00277">AP_GPS.h:277</a></div></div>
<div class="ttc" id="Printf_8cpp_html_a5558580ea8d3854253a721ee58cff12d"><div class="ttname"><a href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a></div><div class="ttdeci">const char * result</div><div class="ttdef"><b>Definition:</b> <a href="Printf_8cpp_source.html#l00013">Printf.cpp:13</a></div></div>
<div class="ttc" id="classAP__GPS__MTK_html"><div class="ttname"><a href="classAP__GPS__MTK.html">AP_GPS_MTK</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__MTK_8h_source.html#l00031">AP_GPS_MTK.h:31</a></div></div>
<div class="ttc" id="structLocation_html_ae51548c2cf32311043ca19b94b9a9223"><div class="ttname"><a href="structLocation.html#ae51548c2cf32311043ca19b94b9a9223">Location::lat</a></div><div class="ttdeci">int32_t lat</div><div class="ttdoc">param 3 - Lattitude * 10**7 </div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00123">AP_Common.h:123</a></div></div>
<div class="ttc" id="classAP__GPS__NMEA_html"><div class="ttname"><a href="classAP__GPS__NMEA.html">AP_GPS_NMEA</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__NMEA_8h_source.html#l00054">AP_GPS_NMEA.h:54</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_af95280ba50704a8adece62755cb348e7a22d7bc8b55699d3423ceb94263ad982d"><div class="ttname"><a href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7a22d7bc8b55699d3423ceb94263ad982d">AP_SerialManager::SerialProtocol_GPS</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8h_source.html#l00080">AP_SerialManager.h:80</a></div></div>
<div class="ttc" id="classAP__GPS_html_a83302e8b52e5d01ae67375b3542eb460"><div class="ttname"><a href="classAP__GPS.html#a83302e8b52e5d01ae67375b3542eb460">AP_GPS::update_instance</a></div><div class="ttdeci">void update_instance(uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00322">AP_GPS.cpp:322</a></div></div>
<div class="ttc" id="classAP__GPS_html_a91c760c11e577d49815bc1a0443cf7f6"><div class="ttname"><a href="classAP__GPS.html#a91c760c11e577d49815bc1a0443cf7f6">AP_GPS::init</a></div><div class="ttdeci">void init(DataFlash_Class *dataflash, const AP_SerialManager &amp;serial_manager)</div><div class="ttdoc">Startup initialisation. </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00122">AP_GPS.cpp:122</a></div></div>
<div class="ttc" id="classAP__GPS_html_a04d3ce24fb1734450132878a154cf70d"><div class="ttname"><a href="classAP__GPS.html#a04d3ce24fb1734450132878a154cf70d">AP_GPS::send_mavlink_gps2_rtk</a></div><div class="ttdeci">void send_mavlink_gps2_rtk(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00570">AP_GPS.cpp:570</a></div></div>
<div class="ttc" id="mavlink__types_8h_html_aa0f38d2f21462ce9ff37bfb2fb43709c"><div class="ttname"><a href="mavlink__types_8h.html#aa0f38d2f21462ce9ff37bfb2fb43709c">mavlink_channel_t</a></div><div class="ttdeci">mavlink_channel_t</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__types_8h_source.html#l00173">mavlink_types.h:173</a></div></div>
<div class="ttc" id="classAP__GPS_html_a5c53cf2e41f3fcf833c74a77a3cc00ec"><div class="ttname"><a href="classAP__GPS.html#a5c53cf2e41f3fcf833c74a77a3cc00ec">AP_GPS::setHIL</a></div><div class="ttdeci">void setHIL(uint8_t instance, GPS_Status status, uint64_t time_epoch_ms, const Location &amp;location, const Vector3f &amp;velocity, uint8_t num_sats, uint16_t hdop, bool _have_vertical_velocity)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00431">AP_GPS.cpp:431</a></div></div>
<div class="ttc" id="GCS__MAVLink_8h_html_aff625e94451bf446bdd56f5d0e081077"><div class="ttname"><a href="GCS__MAVLink_8h.html#aff625e94451bf446bdd56f5d0e081077">MAVLINK_COMM_NUM_BUFFERS</a></div><div class="ttdeci">#define MAVLINK_COMM_NUM_BUFFERS</div><div class="ttdef"><b>Definition:</b> <a href="GCS__MAVLink_8h_source.html#l00024">GCS_MAVLink.h:24</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6a316eaa99b513960bd73ffc65f3ce94d3"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a316eaa99b513960bd73ffc65f3ce94d3">AP_GPS::GPS_TYPE_AUTO</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00061">AP_GPS.h:61</a></div></div>
<div class="ttc" id="classAP__GPS_html_a7409121ce557236dce2fd541309af5fc"><div class="ttname"><a href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fc">AP_GPS::GPS_Status</a></div><div class="ttdeci">GPS_Status</div><div class="ttdoc">GPS status codes. </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00075">AP_GPS.h:75</a></div></div>
<div class="ttc" id="classAP__GPS__MTK19_html_ae7dd973d7154070da15101cfc9f4a58b"><div class="ttname"><a href="classAP__GPS__MTK19.html#ae7dd973d7154070da15101cfc9f4a58b">AP_GPS_MTK19::_detect</a></div><div class="ttdeci">static bool _detect(struct MTK19_detect_state &amp;state, uint8_t data)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__MTK19_8cpp_source.html#l00187">AP_GPS_MTK19.cpp:187</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6a755a5b90129ac93c5b947fd0430252aa"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a755a5b90129ac93c5b947fd0430252aa">AP_GPS::GPS_TYPE_SBP</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00068">AP_GPS.h:68</a></div></div>
<div class="ttc" id="classAP__GPS__SBP_html"><div class="ttname"><a href="classAP__GPS__SBP.html">AP_GPS_SBP</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__SBP_8h_source.html#l00029">AP_GPS_SBP.h:29</a></div></div>
<div class="ttc" id="classAP__GPS_html_a266ef4a39f7a303fc1905bf7f9e4ed09"><div class="ttname"><a href="classAP__GPS.html#a266ef4a39f7a303fc1905bf7f9e4ed09">AP_GPS::send_mavlink_gps_raw</a></div><div class="ttdeci">void send_mavlink_gps_raw(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00499">AP_GPS.cpp:499</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6ae7f79347a000fb1cf52a29057a14c77d"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6ae7f79347a000fb1cf52a29057a14c77d">AP_GPS::GPS_TYPE_NMEA</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00065">AP_GPS.h:65</a></div></div>
<div class="ttc" id="classAP__GPS_html_ab8cf24c74d281be0f8cc68fcf924a678"><div class="ttname"><a href="classAP__GPS.html#ab8cf24c74d281be0f8cc68fcf924a678">AP_GPS::timing</a></div><div class="ttdeci">GPS_timing timing[GPS_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00348">AP_GPS.h:348</a></div></div>
<div class="ttc" id="classAP__GPS_html_a2632887b489c6de665ca309836a443f7"><div class="ttname"><a href="classAP__GPS.html#a2632887b489c6de665ca309836a443f7">AP_GPS::num_instances</a></div><div class="ttdeci">uint8_t num_instances</div><div class="ttdoc">number of GPS instances present </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00357">AP_GPS.h:357</a></div></div>
<div class="ttc" id="classAP__GPS__SBF_html"><div class="ttname"><a href="classAP__GPS__SBF.html">AP_GPS_SBF</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__SBF_8h_source.html#l00029">AP_GPS_SBF.h:29</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html"><div class="ttname"><a href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a></div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00015">HAL.h:15</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6a75e6abea4be518c0367016185ac3e53f"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a75e6abea4be518c0367016185ac3e53f">AP_GPS::GPS_TYPE_MTK</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00063">AP_GPS.h:63</a></div></div>
<div class="ttc" id="AP__GPS_8h_html_a3a734b4d4de7ca88c6563a5a476e3e87"><div class="ttname"><a href="AP__GPS_8h.html#a3a734b4d4de7ca88c6563a5a476e3e87">GPS_MAX_INSTANCES</a></div><div class="ttdeci">#define GPS_MAX_INSTANCES</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00034">AP_GPS.h:34</a></div></div>
<div class="ttc" id="structLocation_html_a89e532f5bcc13db2f51ff9eed667c2b6"><div class="ttname"><a href="structLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">Location::alt</a></div><div class="ttdeci">int32_t alt</div><div class="ttdoc">param 2 - Altitude in centimeters (meters * 100) </div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00122">AP_Common.h:122</a></div></div>
<div class="ttc" id="classAP__GPS_html_ac72f28687a306b821da873c6b2145241"><div class="ttname"><a href="classAP__GPS.html#ac72f28687a306b821da873c6b2145241">AP_GPS::_last_instance_swap_ms</a></div><div class="ttdeci">uint32_t _last_instance_swap_ms</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00315">AP_GPS.h:315</a></div></div>
<div class="ttc" id="structAP__GPS_1_1detect__state_html_a6102db4d46470019b42a5809752c82ae"><div class="ttname"><a href="structAP__GPS_1_1detect__state.html#a6102db4d46470019b42a5809752c82ae">AP_GPS::detect_state::mtk19_detect_state</a></div><div class="ttdeci">struct MTK19_detect_state mtk19_detect_state</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00369">AP_GPS.h:369</a></div></div>
<div class="ttc" id="classAP__GPS_html_a0a7edf82d077df0d203a0715c4fe24f5"><div class="ttname"><a href="classAP__GPS.html#a0a7edf82d077df0d203a0715c4fe24f5">AP_GPS::highest_supported_status</a></div><div class="ttdeci">GPS_Status highest_supported_status(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00310">AP_GPS.cpp:310</a></div></div>
<div class="ttc" id="classAP__GPS_html_a3cd95199f09885a5ea7a604aca167baa"><div class="ttname"><a href="classAP__GPS.html#a3cd95199f09885a5ea7a604aca167baa">AP_GPS::_initialisation_raw_blob</a></div><div class="ttdeci">static const char _initialisation_raw_blob[]</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00382">AP_GPS.h:382</a></div></div>
<div class="ttc" id="AP__GPS__UBLOX_8h_html_af4c5d4398ddf4985bd0ae1c94cc5bca3"><div class="ttname"><a href="AP__GPS__UBLOX_8h.html#af4c5d4398ddf4985bd0ae1c94cc5bca3">UBLOX_SET_BINARY_RAW_BAUD</a></div><div class="ttdeci">#define UBLOX_SET_BINARY_RAW_BAUD</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__UBLOX_8h_source.html#l00042">AP_GPS_UBLOX.h:42</a></div></div>
<div class="ttc" id="classVector3_html_a561df88b28e106e337a25bb86554a569"><div class="ttname"><a href="classVector3.html#a561df88b28e106e337a25bb86554a569">Vector3::y</a></div><div class="ttdeci">T y</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00070">vector3.h:70</a></div></div>
<div class="ttc" id="structAP__GPS_1_1detect__state_html_a3a88e9dbec6da9c65c26f0167b7151ff"><div class="ttname"><a href="structAP__GPS_1_1detect__state.html#a3a88e9dbec6da9c65c26f0167b7151ff">AP_GPS::detect_state::last_baud_change_ms</a></div><div class="ttdeci">uint32_t last_baud_change_ms</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00365">AP_GPS.h:365</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6afb53d6f3afb17c9ce056c2ce4dbfad79"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6afb53d6f3afb17c9ce056c2ce4dbfad79">AP_GPS::GPS_TYPE_UBLOX</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00062">AP_GPS.h:62</a></div></div>
<div class="ttc" id="classAP__GPS_html_a9cc00433bd94933f1259dc8bfe859fe1"><div class="ttname"><a href="classAP__GPS.html#a9cc00433bd94933f1259dc8bfe859fe1">AP_GPS::blob</a></div><div class="ttdeci">const char * blob</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00376">AP_GPS.h:376</a></div></div>
<div class="ttc" id="classAP__GPS__Backend_html_a21ecae803fa5c6eaa9bc257840ce7031"><div class="ttname"><a href="classAP__GPS__Backend.html#a21ecae803fa5c6eaa9bc257840ce7031">AP_GPS_Backend::send_mavlink_gps_rtk</a></div><div class="ttdeci">virtual void send_mavlink_gps_rtk(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="GPS__Backend_8h_source.html#l00047">GPS_Backend.h:47</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_a6ebfff55d1a2a643e0aadc6aeca054e8"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#a6ebfff55d1a2a643e0aadc6aeca054e8">AP_GPS::GPS_State::ground_course_cd</a></div><div class="ttdeci">int32_t ground_course_cd</div><div class="ttdoc">ground course in 100ths of a degree </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00111">AP_GPS.h:111</a></div></div>
<div class="ttc" id="structAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00078">AP_Param.h:78</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6a18e7fef3055b02873f12983bd9c8b350"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a18e7fef3055b02873f12983bd9c8b350">AP_GPS::GPS_TYPE_SBF</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00070">AP_GPS.h:70</a></div></div>
<div class="ttc" id="classAP__GPS__Backend_html_a538a6830526812cae5089fd45a2b60d6"><div class="ttname"><a href="classAP__GPS__Backend.html#a538a6830526812cae5089fd45a2b60d6">AP_GPS_Backend::inject_data</a></div><div class="ttdeci">virtual void inject_data(uint8_t *data, uint8_t len)</div><div class="ttdef"><b>Definition:</b> <a href="GPS__Backend_8h_source.html#l00040">GPS_Backend.h:40</a></div></div>
<div class="ttc" id="classAP__GPS__UBLOX_html_abd6e355abac6f9d1914591b92298395b"><div class="ttname"><a href="classAP__GPS__UBLOX.html#abd6e355abac6f9d1914591b92298395b">AP_GPS_UBLOX::_detect</a></div><div class="ttdeci">static bool _detect(struct UBLOX_detect_state &amp;state, uint8_t data)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__UBLOX_8cpp_source.html#l00822">AP_GPS_UBLOX.cpp:822</a></div></div>
<div class="ttc" id="classAP__GPS_html_a070a2dcb8fd7428fb406aa86ef578df7"><div class="ttname"><a href="classAP__GPS.html#a070a2dcb8fd7428fb406aa86ef578df7">AP_GPS::_type</a></div><div class="ttdeci">AP_Int8 _type[GPS_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00309">AP_GPS.h:309</a></div></div>
<div class="ttc" id="structAP__GPS_1_1detect__state_html_a6eab9f0ae0962738938c38275385ff1c"><div class="ttname"><a href="structAP__GPS_1_1detect__state.html#a6eab9f0ae0962738938c38275385ff1c">AP_GPS::detect_state::detect_started_ms</a></div><div class="ttdeci">uint32_t detect_started_ms</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00364">AP_GPS.h:364</a></div></div>
<div class="ttc" id="classAP__HAL_1_1UARTDriver_html_ae831a0d75f4760267d444c522e1271a1"><div class="ttname"><a href="classAP__HAL_1_1UARTDriver.html#ae831a0d75f4760267d444c522e1271a1">AP_HAL::UARTDriver::set_flow_control</a></div><div class="ttdeci">virtual void set_flow_control(enum flow_control flow_control_setting)</div><div class="ttdef"><b>Definition:</b> <a href="UARTDriver_8h_source.html#l00047">UARTDriver.h:47</a></div></div>
<div class="ttc" id="structAP__GPS_1_1detect__state_html"><div class="ttname"><a href="structAP__GPS_1_1detect__state.html">AP_GPS::detect_state</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00363">AP_GPS.h:363</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Print_html_acc65391952a43334f8f5c9bef341f501"><div class="ttname"><a href="classAP__HAL_1_1Print.html#acc65391952a43334f8f5c9bef341f501">AP_HAL::Print::write</a></div><div class="ttdeci">virtual size_t write(uint8_t)=0</div></div>
<div class="ttc" id="AP__Math_8h_html"><div class="ttname"><a href="AP__Math_8h.html">AP_Math.h</a></div></div>
<div class="ttc" id="AP__Math_8h_html_a420f396aeb3fce0177dead408c1c2da2"><div class="ttname"><a href="AP__Math_8h.html#a420f396aeb3fce0177dead408c1c2da2">degrees</a></div><div class="ttdeci">static float degrees(float rad)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00200">AP_Math.h:200</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_a1deb41c0495c03263d4a900c09cd5bc8"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#a1deb41c0495c03263d4a900c09cd5bc8">AP_GPS::GPS_State::time_week</a></div><div class="ttdeci">uint16_t time_week</div><div class="ttdoc">GPS week number. </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00108">AP_GPS.h:108</a></div></div>
<div class="ttc" id="classAP__GPS_html_a7409121ce557236dce2fd541309af5fca039c0783250f3296425dfc7b53bbdbff"><div class="ttname"><a href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca039c0783250f3296425dfc7b53bbdbff">AP_GPS::GPS_OK_FIX_2D</a></div><div class="ttdoc">Receiving valid messages and 2D lock. </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00078">AP_GPS.h:78</a></div></div>
<div class="ttc" id="classAP__GPS_html_ab9242bd37b2fccdfbb76b42d9ea4a302"><div class="ttname"><a href="classAP__GPS.html#ab9242bd37b2fccdfbb76b42d9ea4a302">AP_GPS::num_sensors</a></div><div class="ttdeci">uint8_t num_sensors(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00130">AP_GPS.h:130</a></div></div>
<div class="ttc" id="AP__GPS_8h_html"><div class="ttname"><a href="AP__GPS_8h.html">AP_GPS.h</a></div></div>
<div class="ttc" id="classDataFlash__Class_html"><div class="ttname"><a href="classDataFlash__Class.html">DataFlash_Class</a></div><div class="ttdef"><b>Definition:</b> <a href="DataFlash_8h_source.html#l00034">DataFlash.h:34</a></div></div>
<div class="ttc" id="AP__Common_8h_html_a121caf32c5b5d704ef3453f0885a9ea5"><div class="ttname"><a href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(_arr)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00086">AP_Common.h:86</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__timing_html_a196a0fde4a1ac10bc27977eb60d69e4e"><div class="ttname"><a href="structAP__GPS_1_1GPS__timing.html#a196a0fde4a1ac10bc27977eb60d69e4e">AP_GPS::GPS_timing::last_fix_time_ms</a></div><div class="ttdeci">uint32_t last_fix_time_ms</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00343">AP_GPS.h:343</a></div></div>
<div class="ttc" id="classAP__GPS_html_a1b88be4642982ed39abefd25e9f38003"><div class="ttname"><a href="classAP__GPS.html#a1b88be4642982ed39abefd25e9f38003">AP_GPS::_initialisation_blob</a></div><div class="ttdeci">static const char _initialisation_blob[]</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00381">AP_GPS.h:381</a></div></div>
<div class="ttc" id="classAP__GPS__UBLOX_html"><div class="ttname"><a href="classAP__GPS__UBLOX.html">AP_GPS_UBLOX</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__UBLOX_8h_source.html#l00063">AP_GPS_UBLOX.h:63</a></div></div>
<div class="ttc" id="AP__Notify_8h_html"><div class="ttname"><a href="AP__Notify_8h.html">AP_Notify.h</a></div></div>
<div class="ttc" id="classAP__GPS_html_abc198fabf6b2db957161df55675cf805"><div class="ttname"><a href="classAP__GPS.html#abc198fabf6b2db957161df55675cf805">AP_GPS::initblob_state</a></div><div class="ttdeci">struct AP_GPS::@5 initblob_state[GPS_MAX_INSTANCES]</div></div>
<div class="ttc" id="AP__Common_8h_html"><div class="ttname"><a href="AP__Common_8h.html">AP_Common.h</a></div><div class="ttdoc">Common definitions and utility routines for the ArduPilot libraries. </div></div>
<div class="ttc" id="classAP__GPS_html_a9c7030cf6793efa8ca5f8dcdb64be7d1"><div class="ttname"><a href="classAP__GPS.html#a9c7030cf6793efa8ca5f8dcdb64be7d1">AP_GPS::drivers</a></div><div class="ttdeci">AP_GPS_Backend * drivers[GPS_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00350">AP_GPS.h:350</a></div></div>
<div class="ttc" id="classAP__GPS__MTK19_html"><div class="ttname"><a href="classAP__GPS__MTK19.html">AP_GPS_MTK19</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__MTK19_8h_source.html#l00032">AP_GPS_MTK19.h:32</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae306f6cf545ee9f1f61cc38301ef76ca"><div class="ttname"><a href="classAP__GPS.html#ae306f6cf545ee9f1f61cc38301ef76ca">AP_GPS::status</a></div><div class="ttdeci">GPS_Status status(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00142">AP_GPS.h:142</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_a20e1b00d3fc64a8dae7a39c3763cfa08"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#a20e1b00d3fc64a8dae7a39c3763cfa08">AP_GPS::GPS_State::location</a></div><div class="ttdeci">Location location</div><div class="ttdoc">last fix location </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00109">AP_GPS.h:109</a></div></div>
<div class="ttc" id="structAP__GPS_1_1detect__state_html_a1f091c7a044d04d64919d7aadedf1495"><div class="ttname"><a href="structAP__GPS_1_1detect__state.html#a1f091c7a044d04d64919d7aadedf1495">AP_GPS::detect_state::ublox_detect_state</a></div><div class="ttdeci">struct UBLOX_detect_state ublox_detect_state</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00367">AP_GPS.h:367</a></div></div>
<div class="ttc" id="structAP__GPS_1_1detect__state_html_a6aeb1068253a9101ac83490271057e2f"><div class="ttname"><a href="structAP__GPS_1_1detect__state.html#a6aeb1068253a9101ac83490271057e2f">AP_GPS::detect_state::last_baud</a></div><div class="ttdeci">uint8_t last_baud</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00366">AP_GPS.h:366</a></div></div>
<div class="ttc" id="structLocation_html_a5831f0aca9e51a15adb96fad465f72f8"><div class="ttname"><a href="structLocation.html#a5831f0aca9e51a15adb96fad465f72f8">Location::lng</a></div><div class="ttdeci">int32_t lng</div><div class="ttdoc">param 4 - Longitude * 10**7 </div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00124">AP_Common.h:124</a></div></div>
<div class="ttc" id="classAP__Notify_html_a5e04fe88ef01c72de62613e7a30e0c61"><div class="ttname"><a href="classAP__Notify.html#a5e04fe88ef01c72de62613e7a30e0c61">AP_Notify::flags</a></div><div class="ttdeci">static struct notify_flags_type flags</div><div class="ttdef"><b>Definition:</b> <a href="AP__Notify_8h_source.html#l00084">AP_Notify.h:84</a></div></div>
<div class="ttc" id="classAP__GPS_html_afcc2442ab71102ddabde55e6fb58bf0a"><div class="ttname"><a href="classAP__GPS.html#afcc2442ab71102ddabde55e6fb58bf0a">AP_GPS::num_sats</a></div><div class="ttdeci">uint8_t num_sats() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00227">AP_GPS.h:227</a></div></div>
<div class="ttc" id="classAP__GPS__MTK_html_aaaa210f0bb36cd3e6150b617418c3a92"><div class="ttname"><a href="classAP__GPS__MTK.html#aaaa210f0bb36cd3e6150b617418c3a92">AP_GPS_MTK::_detect</a></div><div class="ttdeci">static bool _detect(struct MTK_detect_state &amp;state, uint8_t data)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__MTK_8cpp_source.html#l00171">AP_GPS_MTK.cpp:171</a></div></div>
<div class="ttc" id="classAP__GPS_html_ac89218621af4ae16bce41e0fbcb8faf1"><div class="ttname"><a href="classAP__GPS.html#ac89218621af4ae16bce41e0fbcb8faf1">AP_GPS::_baudrates</a></div><div class="ttdeci">static const uint32_t _baudrates[]</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00380">AP_GPS.h:380</a></div></div>
<div class="ttc" id="classAP__GPS_html_a7409121ce557236dce2fd541309af5fca4166c675325c7b3e3e83c7c3ec1fbafb"><div class="ttname"><a href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca4166c675325c7b3e3e83c7c3ec1fbafb">AP_GPS::NO_FIX</a></div><div class="ttdoc">Receiving valid GPS messages but no lock. </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00077">AP_GPS.h:77</a></div></div>
<div class="ttc" id="classAP__GPS_html_aff725a10762e8edc0871c522c0f7cfac"><div class="ttname"><a href="classAP__GPS.html#aff725a10762e8edc0871c522c0f7cfac">AP_GPS::get_vdop</a></div><div class="ttdeci">uint16_t get_vdop() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00259">AP_GPS.h:259</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6a1f0ab654d6f0fbe978f0f35438c04734"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a1f0ab654d6f0fbe978f0f35438c04734">AP_GPS::GPS_TYPE_SIRF</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00066">AP_GPS.h:66</a></div></div>
<div class="ttc" id="classAP__GPS_html_acef6b2ae0cc95f78e18f5187591cb65f"><div class="ttname"><a href="classAP__GPS.html#acef6b2ae0cc95f78e18f5187591cb65f">AP_GPS::state</a></div><div class="ttdeci">GPS_State state[GPS_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00349">AP_GPS.h:349</a></div></div>
<div class="ttc" id="classAP__GPS_html_afbaefc08192797ad72140887aaf1c246"><div class="ttname"><a href="classAP__GPS.html#afbaefc08192797ad72140887aaf1c246">AP_GPS::_raw_data</a></div><div class="ttdeci">AP_Int8 _raw_data</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00318">AP_GPS.h:318</a></div></div>
<div class="ttc" id="AP__GPS__SIRF_8h_html_a688aa025e0239993674de15fccc32285"><div class="ttname"><a href="AP__GPS__SIRF_8h.html#a688aa025e0239993674de15fccc32285">SIRF_SET_BINARY</a></div><div class="ttdeci">#define SIRF_SET_BINARY</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__SIRF_8h_source.html#l00028">AP_GPS_SIRF.h:28</a></div></div>
<div class="ttc" id="structAP__GPS_1_1detect__state_html_a77c207fe0e20e8a532332e3feefe5e1a"><div class="ttname"><a href="structAP__GPS_1_1detect__state.html#a77c207fe0e20e8a532332e3feefe5e1a">AP_GPS::detect_state::sirf_detect_state</a></div><div class="ttdeci">struct SIRF_detect_state sirf_detect_state</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00370">AP_GPS.h:370</a></div></div>
<div class="ttc" id="classAP__GPS_html_a7409121ce557236dce2fd541309af5fca5eba95d16dc0519820e356de7be1362d"><div class="ttname"><a href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca5eba95d16dc0519820e356de7be1362d">AP_GPS::NO_GPS</a></div><div class="ttdoc">No GPS connected/detected. </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00076">AP_GPS.h:76</a></div></div>
<div class="ttc" id="classAP__GPS_html_ad4512e4952aa41566d6afb110e0fd6a1"><div class="ttname"><a href="classAP__GPS.html#ad4512e4952aa41566d6afb110e0fd6a1">AP_GPS::send_blob_update</a></div><div class="ttdeci">void send_blob_update(uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00155">AP_GPS.cpp:155</a></div></div>
<div class="ttc" id="structAP__GPS_1_1detect__state_html_add10334deb707e361ad8d3ddc0eaec36"><div class="ttname"><a href="structAP__GPS_1_1detect__state.html#add10334deb707e361ad8d3ddc0eaec36">AP_GPS::detect_state::mtk_detect_state</a></div><div class="ttdeci">struct MTK_detect_state mtk_detect_state</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00368">AP_GPS.h:368</a></div></div>
<div class="ttc" id="classAP__GPS__SBP_html_ae1ae391d424ba0cc24b0b8b70a263bcc"><div class="ttname"><a href="classAP__GPS__SBP.html#ae1ae391d424ba0cc24b0b8b70a263bcc">AP_GPS_SBP::_detect</a></div><div class="ttdeci">static bool _detect(struct SBP_detect_state &amp;state, uint8_t data)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__SBP_8cpp_source.html#l00323">AP_GPS_SBP.cpp:323</a></div></div>
<div class="ttc" id="classVector3_html"><div class="ttname"><a href="classVector3.html">Vector3&lt; float &gt;</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Stream_html_ae42ff362cc2a7e527c22f92a3740c2ac"><div class="ttname"><a href="classAP__HAL_1_1Stream.html#ae42ff362cc2a7e527c22f92a3740c2ac">AP_HAL::Stream::read</a></div><div class="ttdeci">virtual int16_t read()=0</div></div>
<div class="ttc" id="classAP__GPS_html_a4e2f4adf4afb5c25bcf8cea537ec1221"><div class="ttname"><a href="classAP__GPS.html#a4e2f4adf4afb5c25bcf8cea537ec1221">AP_GPS::get_hdop</a></div><div class="ttdeci">uint16_t get_hdop() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00251">AP_GPS.h:251</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_aa6b54a6f8a46a0418ae505a45480ff45"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#aa6b54a6f8a46a0418ae505a45480ff45">AP_GPS::GPS_State::ground_speed</a></div><div class="ttdeci">float ground_speed</div><div class="ttdoc">ground speed in m/sec </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00110">AP_GPS.h:110</a></div></div>
<div class="ttc" id="classAP__GPS_html_ad9057eb7d0fa2a0fcf39fee4d2d1036b"><div class="ttname"><a href="classAP__GPS.html#ad9057eb7d0fa2a0fcf39fee4d2d1036b">AP_GPS::last_fix_time_ms</a></div><div class="ttdeci">uint32_t last_fix_time_ms(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00268">AP_GPS.h:268</a></div></div>
<div class="ttc" id="classAP__GPS_html_afe04427a47ab5e630cb979815abd911e"><div class="ttname"><a href="classAP__GPS.html#afe04427a47ab5e630cb979815abd911e">AP_GPS::update</a></div><div class="ttdeci">void update(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00379">AP_GPS.cpp:379</a></div></div>
<div class="ttc" id="classAP__GPS_html_a7409121ce557236dce2fd541309af5fca3ea1cd30c63cf65db4a124bcd4b9fbdb"><div class="ttname"><a href="classAP__GPS.html#a7409121ce557236dce2fd541309af5fca3ea1cd30c63cf65db4a124bcd4b9fbdb">AP_GPS::GPS_OK_FIX_3D</a></div><div class="ttdoc">Receiving valid messages and 3D lock. </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00079">AP_GPS.h:79</a></div></div>
<div class="ttc" id="structAP__Notify_1_1notify__flags__type_html_a6e087868faad63754fe6603a3a83e8bc"><div class="ttname"><a href="structAP__Notify_1_1notify__flags__type.html#a6e087868faad63754fe6603a3a83e8bc">AP_Notify::notify_flags_type::gps_status</a></div><div class="ttdeci">uint32_t gps_status</div><div class="ttdef"><b>Definition:</b> <a href="AP__Notify_8h_source.html#l00045">AP_Notify.h:45</a></div></div>
<div class="ttc" id="classAP__GPS__Backend_html_a4da5fd4a69edd3a0a393e74cc0ca391a"><div class="ttname"><a href="classAP__GPS__Backend.html#a4da5fd4a69edd3a0a393e74cc0ca391a">AP_GPS_Backend::read</a></div><div class="ttdeci">virtual bool read()=0</div></div>
<div class="ttc" id="classAP__GPS__SIRF_html"><div class="ttname"><a href="classAP__GPS__SIRF.html">AP_GPS_SIRF</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__SIRF_8h_source.html#l00030">AP_GPS_SIRF.h:30</a></div></div>
<div class="ttc" id="classAP__GPS__SIRF_html_a99c1e4f27c9077aaadead6cc6ad031a0"><div class="ttname"><a href="classAP__GPS__SIRF.html#a99c1e4f27c9077aaadead6cc6ad031a0">AP_GPS_SIRF::_detect</a></div><div class="ttdeci">static bool _detect(struct SIRF_detect_state &amp;state, uint8_t data)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__SIRF_8cpp_source.html#l00209">AP_GPS_SIRF.cpp:209</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6a9b2766a48a9b2711183707bc382683f4"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a9b2766a48a9b2711183707bc382683f4">AP_GPS::GPS_TYPE_PX4</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00069">AP_GPS.h:69</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_ab346404b3a35776ea25982265c346974"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#ab346404b3a35776ea25982265c346974">AP_GPS::GPS_State::hdop</a></div><div class="ttdeci">uint16_t hdop</div><div class="ttdoc">horizontal dilution of precision in cm </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00112">AP_GPS.h:112</a></div></div>
<div class="ttc" id="classAP__GPS_html_a98307dafca6849d38b983258a0ab361c"><div class="ttname"><a href="classAP__GPS.html#a98307dafca6849d38b983258a0ab361c">AP_GPS::location</a></div><div class="ttdeci">const Location &amp; location() const </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00154">AP_GPS.h:154</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6a8d6520721ac1203489b975cc09ef815e"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6a8d6520721ac1203489b975cc09ef815e">AP_GPS::GPS_TYPE_MTK19</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00064">AP_GPS.h:64</a></div></div>
<div class="ttc" id="classAP__GPS_html_a6ea12f82bdeac194c101ce53c5ebf6bd"><div class="ttname"><a href="classAP__GPS.html#a6ea12f82bdeac194c101ce53c5ebf6bd">AP_GPS::_auto_switch</a></div><div class="ttdeci">AP_Int8 _auto_switch</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00311">AP_GPS.h:311</a></div></div>
<div class="ttc" id="AP__Math_8h_html_aec935e3ce7fb13099565b27693547d09"><div class="ttname"><a href="AP__Math_8h.html#aec935e3ce7fb13099565b27693547d09">wrap_360_cd</a></div><div class="ttdeci">int32_t wrap_360_cd(int32_t error)</div><div class="ttdef"><b>Definition:</b> <a href="location_8cpp_source.html#l00154">location.cpp:154</a></div></div>
<div class="ttc" id="AP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00053">AP_Param.h:53</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html_a94ab41309b1ff10b8b862b826e59c882"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">AP_HAL::HAL::scheduler</a></div><div class="ttdeci">AP_HAL::Scheduler * scheduler</div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00087">HAL.h:87</a></div></div>
<div class="ttc" id="classVector3_html_a1a0f7e168c71ca798099f0ba8a444244"><div class="ttname"><a href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">Vector3::x</a></div><div class="ttdeci">T x</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00070">vector3.h:70</a></div></div>
<div class="ttc" id="structLocation_html_a0269ea73231e6acc0acd8fb977c602ff"><div class="ttname"><a href="structLocation.html#a0269ea73231e6acc0acd8fb977c602ff">Location::options</a></div><div class="ttdeci">uint8_t options</div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00116">AP_Common.h:116</a></div></div>
<div class="ttc" id="classAP__GPS__GSOF_html"><div class="ttname"><a href="classAP__GPS__GSOF.html">AP_GPS_GSOF</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS__GSOF_8h_source.html#l00027">AP_GPS_GSOF.h:27</a></div></div>
<div class="ttc" id="structAP__GPS_1_1GPS__State_html_a13d2ae016510be58fa8054f7d130d944"><div class="ttname"><a href="structAP__GPS_1_1GPS__State.html#a13d2ae016510be58fa8054f7d130d944">AP_GPS::GPS_State::num_sats</a></div><div class="ttdeci">uint8_t num_sats</div><div class="ttdoc">Number of visible satelites. </div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00114">AP_GPS.h:114</a></div></div>
<div class="ttc" id="structLocation_html"><div class="ttname"><a href="structLocation.html">Location</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00113">AP_Common.h:113</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae4b5ac77aca03dd3d3f327f016c7e1e6acb925988f6661c9552b576d7078f8ca1"><div class="ttname"><a href="classAP__GPS.html#ae4b5ac77aca03dd3d3f327f016c7e1e6acb925988f6661c9552b576d7078f8ca1">AP_GPS::GPS_TYPE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00060">AP_GPS.h:60</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 14 2015 23:43:13 for APM:Libraries by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
