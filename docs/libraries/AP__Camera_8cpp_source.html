<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>APM:Libraries: libraries/AP_Camera/AP_Camera.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_b76129510ac982b4d1d339675e39410f.html">AP_Camera</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AP_Camera.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AP__Camera_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// -*- tab-width: 4; Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil -*-</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__Camera_8h.html">AP_Camera.h</a>&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Relay_8h.html">AP_Relay/AP_Relay.h</a>&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Math_8h.html">AP_Math/AP_Math.h</a>&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="RC__Channel_8h.html">RC_Channel/RC_Channel.h</a>&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// ------------------------------</span></div>
<div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="AP__Camera_8cpp.html#a89803387a4a662cb3a519d38dee85bc4">   10</a></span>&#160;<span class="preprocessor">#define CAM_DEBUG DISABLED</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">const</span> <a class="code" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code" href="classAP__Camera.html#a0819e25b3f6e6c173f25842dbfd8d50c">AP_Camera::var_info</a>[] = {</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    <span class="comment">// @Param: TRIGG_TYPE</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    <span class="comment">// @DisplayName: Camera shutter (trigger) type</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="comment">// @Description: how to trigger the camera to take a picture</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="comment">// @Values: 0:Servo,1:Relay</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="comment">// @User: Standard</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;TRIGG_TYPE&quot;</span>,  0, <a class="code" href="classAP__Camera.html">AP_Camera</a>, _trigger_type, <a class="code" href="AP__Camera_8h.html#a1ccb29b0c458e967baa34127677cd15b">AP_CAMERA_TRIGGER_DEFAULT_TRIGGER_TYPE</a>),</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="comment">// @Param: DURATION</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="comment">// @DisplayName: Duration that shutter is held open</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="comment">// @Description: How long the shutter will be held open in 10ths of a second (i.e. enter 10 for 1second, 50 for 5seconds)</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="comment">// @Units: seconds</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="comment">// @Range: 0 50</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="comment">// @User: Standard</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DURATION&quot;</span>,    1, <a class="code" href="classAP__Camera.html">AP_Camera</a>, _trigger_duration, <a class="code" href="AP__Camera_8h.html#a77e9f793badf723626ba9cc8447f3e58">AP_CAMERA_TRIGGER_DEFAULT_DURATION</a>),</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="comment">// @Param: SERVO_ON</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">// @DisplayName: Servo ON PWM value</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">// @Description: PWM value to move servo to when shutter is activated</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">// @Units: pwm</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="comment">// @Range: 1000 2000</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">// @User: Standard</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SERVO_ON&quot;</span>,    2, <a class="code" href="classAP__Camera.html">AP_Camera</a>, _servo_on_pwm, <a class="code" href="AP__Camera_8h.html#adb9fdb00ca2e2319ea1dc5dd6ab92f91">AP_CAMERA_SERVO_ON_PWM</a>),</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// @Param: SERVO_OFF</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// @DisplayName: Servo OFF PWM value</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">// @Description: PWM value to move servo to when shutter is deactivated</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// @Units: pwm</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// @Range: 1000 2000</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// @User: Standard</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SERVO_OFF&quot;</span>,   3, <a class="code" href="classAP__Camera.html">AP_Camera</a>, _servo_off_pwm, <a class="code" href="AP__Camera_8h.html#a02e6f5dab509e2d0ab6fb1157a4a305f">AP_CAMERA_SERVO_OFF_PWM</a>),</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// @Param: TRIGG_DIST</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// @DisplayName: Camera trigger distance</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">// @Description: Distance in meters between camera triggers. If this value is non-zero then the camera will trigger whenever the GPS position changes by this number of meters regardless of what mode the APM is in. Note that this parameter can also be set in an auto mission using the DO_SET_CAM_TRIGG_DIST command, allowing you to enable/disable the triggering of the camera during the flight.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">// @User: Standard</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">// @Units: meters</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// @Range: 0 1000</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;TRIGG_DIST&quot;</span>,  4, <a class="code" href="classAP__Camera.html">AP_Camera</a>, _trigg_dist, 0),</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// @Param: RELAY_ON</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// @DisplayName: Relay ON value</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// @Description: This sets whether the relay goes high or low when it triggers. Note that you should also set RELAY_DEFAULT appropriately for your camera</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// @Values: 0:Low,1:High</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">// @User: Standard</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RELAY_ON&quot;</span>,    5, <a class="code" href="classAP__Camera.html">AP_Camera</a>, _relay_on, 1),</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;};</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classAP__Camera.html#a336a2fbee20b67e8af153e4bc21bd3fd">   65</a></span>&#160;<a class="code" href="classAP__Camera.html#a336a2fbee20b67e8af153e4bc21bd3fd">AP_Camera::servo_pic</a>()</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="classRC__Channel__aux.html#a8fed980206f9aad4c5435c5193690be7">RC_Channel_aux::set_radio</a>(<a class="code" href="classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa431cac7006ac9b8c7672a566d49d2e1c">RC_Channel_aux::k_cam_trigger</a>, <a class="code" href="classAP__Camera.html#af9293b7ef18744e11846fb1ea4440c10">_servo_on_pwm</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// leave a message that it should be active for this many loops (assumes 50hz loops)</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="classAP__Camera.html#a67ac927a0fb87643c1c46c4c13304d17">_trigger_counter</a> = <a class="code" href="AP__Math_8h.html#abd026c0672c617e3092c9b3e1fcb847f">constrain_int16</a>(<a class="code" href="classAP__Camera.html#a54d284e318a74a219ed27f0b3e0c31cb">_trigger_duration</a>*5,0,255);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classAP__Camera.html#a73b785894a0650a4dd8b1ffc24c4c250">   75</a></span>&#160;<a class="code" href="classAP__Camera.html#a73b785894a0650a4dd8b1ffc24c4c250">AP_Camera::relay_pic</a>()</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__Camera.html#af1c57b602fc3c83b0c8ffab13bd3163b">_relay_on</a>) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="classAP__Camera.html#a06d470d983e22c3c87e4295d1c32238c">_apm_relay</a>-&gt;<a class="code" href="classAP__Relay.html#a8f00e5559174917b795ef84472822e53">on</a>(0);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="classAP__Camera.html#a06d470d983e22c3c87e4295d1c32238c">_apm_relay</a>-&gt;<a class="code" href="classAP__Relay.html#aff679a24b3c6b73f066e1e62c86e0fae">off</a>(0);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// leave a message that it should be active for this many loops (assumes 50hz loops)</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="classAP__Camera.html#a67ac927a0fb87643c1c46c4c13304d17">_trigger_counter</a> = <a class="code" href="AP__Math_8h.html#abd026c0672c617e3092c9b3e1fcb847f">constrain_int16</a>(<a class="code" href="classAP__Camera.html#a54d284e318a74a219ed27f0b3e0c31cb">_trigger_duration</a>*5,0,255);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classAP__Camera.html#a74372e2b8e5d3cd3b464f2ef417cb0f6">   90</a></span>&#160;<a class="code" href="classAP__Camera.html#a74372e2b8e5d3cd3b464f2ef417cb0f6">AP_Camera::trigger_pic</a>(<span class="keywordtype">bool</span> send_mavlink_msg)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classAP__Camera.html#ab0cb6709e2683b25d372e1f1da6a15d1">_image_index</a>++;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="classAP__Camera.html#a15e29555e8a25dfcc17b97c37b245536">_trigger_type</a>)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="AP__Camera_8h.html#acf9f5a2bd07c05c6fc5a3b5f682a6f82">AP_CAMERA_TRIGGER_TYPE_SERVO</a>:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="classAP__Camera.html#a336a2fbee20b67e8af153e4bc21bd3fd">servo_pic</a>();                    <span class="comment">// Servo operated camera</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="AP__Camera_8h.html#a882ca1b134a856e7a1986b0068306002">AP_CAMERA_TRIGGER_TYPE_RELAY</a>:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="classAP__Camera.html#a73b785894a0650a4dd8b1ffc24c4c250">relay_pic</a>();                    <span class="comment">// basic relay activation</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (send_mavlink_msg) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="comment">// create command long mavlink message</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="struct____mavlink__command__long__t.html">mavlink_command_long_t</a> cmd_msg;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        memset(&amp;cmd_msg, 0, <span class="keyword">sizeof</span>(cmd_msg));</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        cmd_msg.<a class="code" href="struct____mavlink__command__long__t.html#a059e44ecfa8fbb9f11543a81145265cf">command</a> = <a class="code" href="ardupilotmega_8h.html#a532ed19c5f99d731a8bd3f2f80e48b6ba78badabbfce051ec9d261cd797cb8f63">MAV_CMD_DO_DIGICAM_CONTROL</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        cmd_msg.<a class="code" href="struct____mavlink__command__long__t.html#a9c74f309b82fed5527bf1e7732424f21">param5</a> = 1;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">// create message</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        mavlink_message_t msg;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="mavlink__msg__command__long_8h.html#a4b9ea1702839a5a09d44775799a24ec8">mavlink_msg_command_long_encode</a>(0, 0, &amp;msg, &amp;cmd_msg);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="comment">// forward to all components</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="classGCS__MAVLINK.html#a928edfeb8ca8d1656eca3e0c176d49a7">GCS_MAVLINK::send_to_components</a>(&amp;msg);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classAP__Camera.html#a3124ce12331fb79e0b68b7067d609be2">  121</a></span>&#160;<a class="code" href="classAP__Camera.html#a3124ce12331fb79e0b68b7067d609be2">AP_Camera::trigger_pic_cleanup</a>()</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__Camera.html#a67ac927a0fb87643c1c46c4c13304d17">_trigger_counter</a>) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <a class="code" href="classAP__Camera.html#a67ac927a0fb87643c1c46c4c13304d17">_trigger_counter</a>--;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="classAP__Camera.html#a15e29555e8a25dfcc17b97c37b245536">_trigger_type</a>) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="AP__Camera_8h.html#acf9f5a2bd07c05c6fc5a3b5f682a6f82">AP_CAMERA_TRIGGER_TYPE_SERVO</a>:</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                <a class="code" href="classRC__Channel__aux.html#a8fed980206f9aad4c5435c5193690be7">RC_Channel_aux::set_radio</a>(<a class="code" href="classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa431cac7006ac9b8c7672a566d49d2e1c">RC_Channel_aux::k_cam_trigger</a>, <a class="code" href="classAP__Camera.html#a361e9b2bbcaf421a2cd17220ad25ae5c">_servo_off_pwm</a>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="AP__Camera_8h.html#a882ca1b134a856e7a1986b0068306002">AP_CAMERA_TRIGGER_TYPE_RELAY</a>:</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classAP__Camera.html#af1c57b602fc3c83b0c8ffab13bd3163b">_relay_on</a>) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    <a class="code" href="classAP__Camera.html#a06d470d983e22c3c87e4295d1c32238c">_apm_relay</a>-&gt;<a class="code" href="classAP__Relay.html#aff679a24b3c6b73f066e1e62c86e0fae">off</a>(0);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    <a class="code" href="classAP__Camera.html#a06d470d983e22c3c87e4295d1c32238c">_apm_relay</a>-&gt;<a class="code" href="classAP__Relay.html#a8f00e5559174917b795ef84472822e53">on</a>(0);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classAP__Camera.html#a27664cf70d78d5af17d66a3d715048db">  143</a></span>&#160;<a class="code" href="classAP__Camera.html#a27664cf70d78d5af17d66a3d715048db">AP_Camera::control_msg</a>(mavlink_message_t* msg)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="struct____mavlink__digicam__control__t.html">__mavlink_digicam_control_t</a> packet;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="mavlink__msg__digicam__control_8h.html#a555bdf370d83bb7e910c6bdf7e37ecbc">mavlink_msg_digicam_control_decode</a>(msg, &amp;packet);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="classAP__Camera.html#a7c7aa23d1a71db5345bb11899bbb8f31">control</a>(packet.<a class="code" href="struct____mavlink__digicam__control__t.html#aee93a31e833bd6e67a650fc9c4cbbcb3">session</a>, packet.<a class="code" href="struct____mavlink__digicam__control__t.html#aafd3d960b150853d157257cde74d8cfa">zoom_pos</a>, packet.<a class="code" href="struct____mavlink__digicam__control__t.html#a348697e63bf346dd8e2d028b2a401dd0">zoom_step</a>, packet.<a class="code" href="struct____mavlink__digicam__control__t.html#ace7736fd2e64e2729a128e3e7d7cd407">focus_lock</a>, packet.<a class="code" href="struct____mavlink__digicam__control__t.html#ad0b5241aa056e7ead65e22d8837006e7">shot</a>, packet.<a class="code" href="struct____mavlink__digicam__control__t.html#a67ed21a4baf994d5d61590a7e31aa8dd">command_id</a>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="classAP__Camera.html#a2ceac45cdd6c13d66052c8168fff689c">  151</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__Camera.html#a2ceac45cdd6c13d66052c8168fff689c">AP_Camera::configure</a>(<span class="keywordtype">float</span> shooting_mode, <span class="keywordtype">float</span> shutter_speed, <span class="keywordtype">float</span> aperture, <span class="keywordtype">float</span> ISO, <span class="keywordtype">float</span> exposure_type, <span class="keywordtype">float</span> cmd_id, <span class="keywordtype">float</span> engine_cutoff_time)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// we cannot process the configure command so convert to mavlink message</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// and send to all components in case they and process it</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    mavlink_message_t msg;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="struct____mavlink__command__long__t.html">mavlink_command_long_t</a> mav_cmd_long = {};</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// convert mission command to mavlink command_long</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a059e44ecfa8fbb9f11543a81145265cf">command</a> = <a class="code" href="ardupilotmega_8h.html#a532ed19c5f99d731a8bd3f2f80e48b6ba560d456f9d38eaac0f59cc95220aaa84">MAV_CMD_DO_DIGICAM_CONFIGURE</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a8bb82d921422fd825276bbc43502fc77">param1</a> = shooting_mode;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a715bfae8c34e8882b82efbb2bd0e580c">param2</a> = shutter_speed;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a9b11618cd6d409944727cfcc0d637f72">param3</a> = aperture;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a1448f543670b7a8973c6461254cce429">param4</a> = ISO;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a9c74f309b82fed5527bf1e7732424f21">param5</a> = exposure_type;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#ad75daa212f56fd47cd0956f8dc4fdbd5">param6</a> = cmd_id;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a1bf675e543b14770e7c410adb9d3d21e">param7</a> = engine_cutoff_time;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// Encode Command long into MAVLINK msg</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="mavlink__msg__command__long_8h.html#a4b9ea1702839a5a09d44775799a24ec8">mavlink_msg_command_long_encode</a>(0, 0, &amp;msg, &amp;mav_cmd_long);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// send to all components</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="classGCS__MAVLINK.html#a928edfeb8ca8d1656eca3e0c176d49a7">GCS_MAVLINK::send_to_components</a>(&amp;msg);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="classAP__Camera.html#a7c7aa23d1a71db5345bb11899bbb8f31">  176</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__Camera.html#a7c7aa23d1a71db5345bb11899bbb8f31">AP_Camera::control</a>(<span class="keywordtype">float</span> session, <span class="keywordtype">float</span> zoom_pos, <span class="keywordtype">float</span> zoom_step, <span class="keywordtype">float</span> focus_lock, <span class="keywordtype">float</span> shooting_cmd, <span class="keywordtype">float</span> cmd_id)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// take picture</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8h.html#acedd05d9f5ab6f2878991cc684e17c18">is_equal</a>(shooting_cmd,1.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>)) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="classAP__Camera.html#a74372e2b8e5d3cd3b464f2ef417cb0f6">trigger_pic</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    mavlink_message_t msg;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="struct____mavlink__command__long__t.html">mavlink_command_long_t</a> mav_cmd_long = {};</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">// convert command to mavlink command long</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a059e44ecfa8fbb9f11543a81145265cf">command</a> = <a class="code" href="ardupilotmega_8h.html#a532ed19c5f99d731a8bd3f2f80e48b6ba78badabbfce051ec9d261cd797cb8f63">MAV_CMD_DO_DIGICAM_CONTROL</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a8bb82d921422fd825276bbc43502fc77">param1</a> = session;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a715bfae8c34e8882b82efbb2bd0e580c">param2</a> = zoom_pos;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a9b11618cd6d409944727cfcc0d637f72">param3</a> = zoom_step;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a1448f543670b7a8973c6461254cce429">param4</a> = focus_lock;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#a9c74f309b82fed5527bf1e7732424f21">param5</a> = shooting_cmd;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    mav_cmd_long.<a class="code" href="struct____mavlink__command__long__t.html#ad75daa212f56fd47cd0956f8dc4fdbd5">param6</a> = cmd_id;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// Encode Command long into MAVLINK msg</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="mavlink__msg__command__long_8h.html#a4b9ea1702839a5a09d44775799a24ec8">mavlink_msg_command_long_encode</a>(0, 0, &amp;msg, &amp;mav_cmd_long);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">// send to all components</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="classGCS__MAVLINK.html#a928edfeb8ca8d1656eca3e0c176d49a7">GCS_MAVLINK::send_to_components</a>(&amp;msg);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">  Send camera feedback to the GCS</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classAP__Camera.html#ada4a3f88906024b90555c5e0805752df">  205</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__Camera.html#ada4a3f88906024b90555c5e0805752df">AP_Camera::send_feedback</a>(<a class="code" href="mavlink__types_8h.html#aa0f38d2f21462ce9ff37bfb2fb43709c">mavlink_channel_t</a> chan, <a class="code" href="classAP__GPS.html">AP_GPS</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a962e3f0f8682f6dedb5a001a70bdd65e">gps</a>, <span class="keyword">const</span> <a class="code" href="classAP__AHRS.html">AP_AHRS</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a0a15280249072432f8c559cc00d09dee">ahrs</a>, <span class="keyword">const</span> <a class="code" href="structLocation.html">Location</a> &amp;current_loc)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordtype">float</span> altitude, altitude_rel;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (current_loc.<a class="code" href="structLocation.html#ad9759dba1fc13f13c531ebdcb2c9588e">flags</a>.<a class="code" href="structLocation__Option__Flags.html#a3f0f17e655550917bc3177e876d6dc14">relative_alt</a>) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        altitude = current_loc.<a class="code" href="structLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a>+ahrs.<a class="code" href="classAP__AHRS.html#aea45b16e6469a3b392b8bf52fb864732">get_home</a>().<a class="code" href="structLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        altitude_rel = current_loc.<a class="code" href="structLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        altitude = current_loc.<a class="code" href="structLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        altitude_rel = current_loc.<a class="code" href="structLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a> - ahrs.<a class="code" href="classAP__AHRS.html#aea45b16e6469a3b392b8bf52fb864732">get_home</a>().<a class="code" href="structLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    mavlink_msg_camera_feedback_send(chan, </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        gps.<a class="code" href="classAP__GPS.html#a199daa774fba57b608c0a245e70c46d5">time_epoch_usec</a>(),</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        0, 0, <a class="code" href="classAP__Camera.html#ab0cb6709e2683b25d372e1f1da6a15d1">_image_index</a>,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        current_loc.<a class="code" href="structLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a>, current_loc.<a class="code" href="structLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a>,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        altitude/100.0f, altitude_rel/100.0f,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        ahrs.<a class="code" href="classAP__AHRS.html#a0c6e82280b005a339b04028b1f5ea70d">roll_sensor</a>/100.0f, ahrs.<a class="code" href="classAP__AHRS.html#af3394de208d1f96457382d79ab7a8d01">pitch_sensor</a>/100.0f, ahrs.<a class="code" href="classAP__AHRS.html#a8a160130dd99016a19abab9d85917261">yaw_sensor</a>/100.0f,</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        0.0f,<a class="code" href="ardupilotmega_8h.html#a1b3f3331907ed4cfc61949d0488ad929a458c072f6d86085211bd5970fcbe865f">CAMERA_FEEDBACK_PHOTO</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">/*  update location, for triggering by GPS distance moved</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">    This function returns true if a picture should be taken</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">    The caller is responsible for taking the picture based on the return value of this function.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">    The caller is also responsible for logging the details about the photo</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="classAP__Camera.html#a12e960c264147ca7a73c21f16c7522c0">  231</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classAP__Camera.html#a12e960c264147ca7a73c21f16c7522c0">AP_Camera::update_location</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structLocation.html">Location</a> &amp;loc)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8h.html#a108b79eeb35c5d58f324458ec9e1e9f2">is_zero</a>(<a class="code" href="classAP__Camera.html#acd2e6ad4afc2f7f0acb4410ce89588fb">_trigg_dist</a>)) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__Camera.html#aa3a20cb5ec2e86ac69d02e67954d8c6a">_last_location</a>.<a class="code" href="structLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a> == 0 &amp;&amp; <a class="code" href="classAP__Camera.html#aa3a20cb5ec2e86ac69d02e67954d8c6a">_last_location</a>.<a class="code" href="structLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a> == 0) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="code" href="classAP__Camera.html#aa3a20cb5ec2e86ac69d02e67954d8c6a">_last_location</a> = loc;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__Camera.html#aa3a20cb5ec2e86ac69d02e67954d8c6a">_last_location</a>.<a class="code" href="structLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a> == loc.<a class="code" href="structLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a> &amp;&amp; <a class="code" href="classAP__Camera.html#aa3a20cb5ec2e86ac69d02e67954d8c6a">_last_location</a>.<a class="code" href="structLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a> == loc.<a class="code" href="structLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a>) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">// we haven&#39;t moved - this can happen as update_location() may</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="comment">// be called without a new GPS fix</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8h.html#aa825a788804b8dd4cf1e3cfb42960a8b">get_distance</a>(loc, <a class="code" href="classAP__Camera.html#aa3a20cb5ec2e86ac69d02e67954d8c6a">_last_location</a>) &lt; <a class="code" href="classAP__Camera.html#acd2e6ad4afc2f7f0acb4410ce89588fb">_trigg_dist</a>) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="classAP__Camera.html#aa3a20cb5ec2e86ac69d02e67954d8c6a">_last_location</a> = loc;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div>
<div class="ttc" id="ardupilotmega_8h_html_a532ed19c5f99d731a8bd3f2f80e48b6ba560d456f9d38eaac0f59cc95220aaa84"><div class="ttname"><a href="ardupilotmega_8h.html#a532ed19c5f99d731a8bd3f2f80e48b6ba560d456f9d38eaac0f59cc95220aaa84">MAV_CMD_DO_DIGICAM_CONFIGURE</a></div><div class="ttdef"><b>Definition:</b> <a href="ardupilotmega_8h_source.html#l00077">ardupilotmega.h:77</a></div></div>
<div class="ttc" id="classAP__GPS_html"><div class="ttname"><a href="classAP__GPS.html">AP_GPS</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00042">AP_GPS.h:42</a></div></div>
<div class="ttc" id="classAP__Camera_html_af9293b7ef18744e11846fb1ea4440c10"><div class="ttname"><a href="classAP__Camera.html#af9293b7ef18744e11846fb1ea4440c10">AP_Camera::_servo_on_pwm</a></div><div class="ttdeci">AP_Int16 _servo_on_pwm</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00071">AP_Camera.h:71</a></div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aa431cac7006ac9b8c7672a566d49d2e1c"><div class="ttname"><a href="classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa431cac7006ac9b8c7672a566d49d2e1c">RC_Channel_aux::k_cam_trigger</a></div><div class="ttdoc">camera trigger </div><div class="ttdef"><b>Definition:</b> <a href="RC__Channel__aux_8h_source.html#l00048">RC_Channel_aux.h:48</a></div></div>
<div class="ttc" id="struct____mavlink__digicam__control__t_html_ad0b5241aa056e7ead65e22d8837006e7"><div class="ttname"><a href="struct____mavlink__digicam__control__t.html#ad0b5241aa056e7ead65e22d8837006e7">__mavlink_digicam_control_t::shot</a></div><div class="ttdeci">uint8_t shot</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__digicam__control_8h_source.html#l00014">mavlink_msg_digicam_control.h:14</a></div></div>
<div class="ttc" id="AP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="AP__Param_8h_html_abe1c2a65ce5455bf37f3c000b4241c00"><div class="ttname"><a href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, class, element, def)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00046">AP_Param.h:46</a></div></div>
<div class="ttc" id="struct____mavlink__command__long__t_html"><div class="ttname"><a href="struct____mavlink__command__long__t.html">__mavlink_command_long_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__command__long_8h_source.html#l00005">mavlink_msg_command_long.h:5</a></div></div>
<div class="ttc" id="struct____mavlink__digicam__control__t_html_a67ed21a4baf994d5d61590a7e31aa8dd"><div class="ttname"><a href="struct____mavlink__digicam__control__t.html#a67ed21a4baf994d5d61590a7e31aa8dd">__mavlink_digicam_control_t::command_id</a></div><div class="ttdeci">uint8_t command_id</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__digicam__control_8h_source.html#l00015">mavlink_msg_digicam_control.h:15</a></div></div>
<div class="ttc" id="struct____mavlink__digicam__control__t_html_ace7736fd2e64e2729a128e3e7d7cd407"><div class="ttname"><a href="struct____mavlink__digicam__control__t.html#ace7736fd2e64e2729a128e3e7d7cd407">__mavlink_digicam_control_t::focus_lock</a></div><div class="ttdeci">uint8_t focus_lock</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__digicam__control_8h_source.html#l00013">mavlink_msg_digicam_control.h:13</a></div></div>
<div class="ttc" id="classAP__Camera_html_af1c57b602fc3c83b0c8ffab13bd3163b"><div class="ttname"><a href="classAP__Camera.html#af1c57b602fc3c83b0c8ffab13bd3163b">AP_Camera::_relay_on</a></div><div class="ttdeci">AP_Int8 _relay_on</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00070">AP_Camera.h:70</a></div></div>
<div class="ttc" id="classAP__AHRS_html"><div class="ttname"><a href="classAP__AHRS.html">AP_AHRS</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00048">AP_AHRS.h:48</a></div></div>
<div class="ttc" id="classAP__Relay_html_aff679a24b3c6b73f066e1e62c86e0fae"><div class="ttname"><a href="classAP__Relay.html#aff679a24b3c6b73f066e1e62c86e0fae">AP_Relay::off</a></div><div class="ttdeci">void off(uint8_t relay)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Relay_8cpp_source.html#l00108">AP_Relay.cpp:108</a></div></div>
<div class="ttc" id="classAP__Camera_html_ada4a3f88906024b90555c5e0805752df"><div class="ttname"><a href="classAP__Camera.html#ada4a3f88906024b90555c5e0805752df">AP_Camera::send_feedback</a></div><div class="ttdeci">void send_feedback(mavlink_channel_t chan, AP_GPS &amp;gps, const AP_AHRS &amp;ahrs, const Location &amp;current_loc)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00205">AP_Camera.cpp:205</a></div></div>
<div class="ttc" id="classAP__Camera_html_a67ac927a0fb87643c1c46c4c13304d17"><div class="ttname"><a href="classAP__Camera.html#a67ac927a0fb87643c1c46c4c13304d17">AP_Camera::_trigger_counter</a></div><div class="ttdeci">uint8_t _trigger_counter</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00073">AP_Camera.h:73</a></div></div>
<div class="ttc" id="struct____mavlink__command__long__t_html_a059e44ecfa8fbb9f11543a81145265cf"><div class="ttname"><a href="struct____mavlink__command__long__t.html#a059e44ecfa8fbb9f11543a81145265cf">__mavlink_command_long_t::command</a></div><div class="ttdeci">uint16_t command</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__command__long_8h_source.html#l00014">mavlink_msg_command_long.h:14</a></div></div>
<div class="ttc" id="AP__Camera_8h_html_a1ccb29b0c458e967baa34127677cd15b"><div class="ttname"><a href="AP__Camera_8h.html#a1ccb29b0c458e967baa34127677cd15b">AP_CAMERA_TRIGGER_DEFAULT_TRIGGER_TYPE</a></div><div class="ttdeci">#define AP_CAMERA_TRIGGER_DEFAULT_TRIGGER_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00021">AP_Camera.h:21</a></div></div>
<div class="ttc" id="struct____mavlink__command__long__t_html_a1bf675e543b14770e7c410adb9d3d21e"><div class="ttname"><a href="struct____mavlink__command__long__t.html#a1bf675e543b14770e7c410adb9d3d21e">__mavlink_command_long_t::param7</a></div><div class="ttdeci">float param7</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__command__long_8h_source.html#l00013">mavlink_msg_command_long.h:13</a></div></div>
<div class="ttc" id="ardupilotmega_8h_html_a1b3f3331907ed4cfc61949d0488ad929a458c072f6d86085211bd5970fcbe865f"><div class="ttname"><a href="ardupilotmega_8h.html#a1b3f3331907ed4cfc61949d0488ad929a458c072f6d86085211bd5970fcbe865f">CAMERA_FEEDBACK_PHOTO</a></div><div class="ttdef"><b>Definition:</b> <a href="ardupilotmega_8h_source.html#l00211">ardupilotmega.h:211</a></div></div>
<div class="ttc" id="structLocation_html_ae51548c2cf32311043ca19b94b9a9223"><div class="ttname"><a href="structLocation.html#ae51548c2cf32311043ca19b94b9a9223">Location::lat</a></div><div class="ttdeci">int32_t lat</div><div class="ttdoc">param 3 - Lattitude * 10**7 </div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00123">AP_Common.h:123</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a0c6e82280b005a339b04028b1f5ea70d"><div class="ttname"><a href="classAP__AHRS.html#a0c6e82280b005a339b04028b1f5ea70d">AP_AHRS::roll_sensor</a></div><div class="ttdeci">int32_t roll_sensor</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00199">AP_AHRS.h:199</a></div></div>
<div class="ttc" id="mavlink__types_8h_html_aa0f38d2f21462ce9ff37bfb2fb43709c"><div class="ttname"><a href="mavlink__types_8h.html#aa0f38d2f21462ce9ff37bfb2fb43709c">mavlink_channel_t</a></div><div class="ttdeci">mavlink_channel_t</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__types_8h_source.html#l00173">mavlink_types.h:173</a></div></div>
<div class="ttc" id="classAP__Camera_html_aa3a20cb5ec2e86ac69d02e67954d8c6a"><div class="ttname"><a href="classAP__Camera.html#aa3a20cb5ec2e86ac69d02e67954d8c6a">AP_Camera::_last_location</a></div><div class="ttdeci">struct Location _last_location</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00080">AP_Camera.h:80</a></div></div>
<div class="ttc" id="classAP__AHRS_html_aea45b16e6469a3b392b8bf52fb864732"><div class="ttname"><a href="classAP__AHRS.html#aea45b16e6469a3b392b8bf52fb864732">AP_AHRS::get_home</a></div><div class="ttdeci">const struct Location &amp; get_home(void) const </div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00358">AP_AHRS.h:358</a></div></div>
<div class="ttc" id="classAP__Relay_html_a8f00e5559174917b795ef84472822e53"><div class="ttname"><a href="classAP__Relay.html#a8f00e5559174917b795ef84472822e53">AP_Relay::on</a></div><div class="ttdeci">void on(uint8_t relay)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Relay_8cpp_source.html#l00099">AP_Relay.cpp:99</a></div></div>
<div class="ttc" id="classAP__Camera_html_a15e29555e8a25dfcc17b97c37b245536"><div class="ttname"><a href="classAP__Camera.html#a15e29555e8a25dfcc17b97c37b245536">AP_Camera::_trigger_type</a></div><div class="ttdeci">AP_Int8 _trigger_type</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00068">AP_Camera.h:68</a></div></div>
<div class="ttc" id="mavlink__msg__digicam__control_8h_html_a555bdf370d83bb7e910c6bdf7e37ecbc"><div class="ttname"><a href="mavlink__msg__digicam__control_8h.html#a555bdf370d83bb7e910c6bdf7e37ecbc">mavlink_msg_digicam_control_decode</a></div><div class="ttdeci">static void mavlink_msg_digicam_control_decode(const mavlink_message_t *msg, mavlink_digicam_control_t *digicam_control)</div><div class="ttdoc">Decode a digicam_control message into a struct. </div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__digicam__control_8h_source.html#l00409">mavlink_msg_digicam_control.h:409</a></div></div>
<div class="ttc" id="struct____mavlink__command__long__t_html_ad75daa212f56fd47cd0956f8dc4fdbd5"><div class="ttname"><a href="struct____mavlink__command__long__t.html#ad75daa212f56fd47cd0956f8dc4fdbd5">__mavlink_command_long_t::param6</a></div><div class="ttdeci">float param6</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__command__long_8h_source.html#l00012">mavlink_msg_command_long.h:12</a></div></div>
<div class="ttc" id="classGCS__MAVLINK_html_a928edfeb8ca8d1656eca3e0c176d49a7"><div class="ttname"><a href="classGCS__MAVLINK.html#a928edfeb8ca8d1656eca3e0c176d49a7">GCS_MAVLINK::send_to_components</a></div><div class="ttdeci">static void send_to_components(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00176">GCS.h:176</a></div></div>
<div class="ttc" id="classAP__Camera_html_a54d284e318a74a219ed27f0b3e0c31cb"><div class="ttname"><a href="classAP__Camera.html#a54d284e318a74a219ed27f0b3e0c31cb">AP_Camera::_trigger_duration</a></div><div class="ttdeci">AP_Int8 _trigger_duration</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00069">AP_Camera.h:69</a></div></div>
<div class="ttc" id="AP__Camera_8h_html_a02e6f5dab509e2d0ab6fb1157a4a305f"><div class="ttname"><a href="AP__Camera_8h.html#a02e6f5dab509e2d0ab6fb1157a4a305f">AP_CAMERA_SERVO_OFF_PWM</a></div><div class="ttdeci">#define AP_CAMERA_SERVO_OFF_PWM</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00026">AP_Camera.h:26</a></div></div>
<div class="ttc" id="structLocation_html_a89e532f5bcc13db2f51ff9eed667c2b6"><div class="ttname"><a href="structLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">Location::alt</a></div><div class="ttdeci">int32_t alt</div><div class="ttdoc">param 2 - Altitude in centimeters (meters * 100) </div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00122">AP_Common.h:122</a></div></div>
<div class="ttc" id="classAP__AHRS_html_af3394de208d1f96457382d79ab7a8d01"><div class="ttname"><a href="classAP__AHRS.html#af3394de208d1f96457382d79ab7a8d01">AP_AHRS::pitch_sensor</a></div><div class="ttdeci">int32_t pitch_sensor</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00200">AP_AHRS.h:200</a></div></div>
<div class="ttc" id="classAP__Camera_html"><div class="ttname"><a href="classAP__Camera.html">AP_Camera</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00030">AP_Camera.h:30</a></div></div>
<div class="ttc" id="RC__Channel_8h_html"><div class="ttname"><a href="RC__Channel_8h.html">RC_Channel.h</a></div><div class="ttdoc">RC_Channel manager, with EEPROM-backed storage of constants. </div></div>
<div class="ttc" id="classAP__Camera_html_a0819e25b3f6e6c173f25842dbfd8d50c"><div class="ttname"><a href="classAP__Camera.html#a0819e25b3f6e6c173f25842dbfd8d50c">AP_Camera::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00065">AP_Camera.h:65</a></div></div>
<div class="ttc" id="DerivativeFilter_8cpp_html_a357394e0f6f88c8a57bd893ab28dc8f8"><div class="ttname"><a href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a></div><div class="ttdeci">#define f(i)</div></div>
<div class="ttc" id="AP__Math_8h_html_acedd05d9f5ab6f2878991cc684e17c18"><div class="ttname"><a href="AP__Math_8h.html#acedd05d9f5ab6f2878991cc684e17c18">is_equal</a></div><div class="ttdeci">static bool is_equal(const float fVal1, const float fVal2)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00075">AP_Math.h:75</a></div></div>
<div class="ttc" id="classAP__Camera_html_a2ceac45cdd6c13d66052c8168fff689c"><div class="ttname"><a href="classAP__Camera.html#a2ceac45cdd6c13d66052c8168fff689c">AP_Camera::configure</a></div><div class="ttdeci">void configure(float shooting_mode, float shutter_speed, float aperture, float ISO, float exposure_type, float cmd_id, float engine_cutoff_time)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00151">AP_Camera.cpp:151</a></div></div>
<div class="ttc" id="struct____mavlink__command__long__t_html_a8bb82d921422fd825276bbc43502fc77"><div class="ttname"><a href="struct____mavlink__command__long__t.html#a8bb82d921422fd825276bbc43502fc77">__mavlink_command_long_t::param1</a></div><div class="ttdeci">float param1</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__command__long_8h_source.html#l00007">mavlink_msg_command_long.h:7</a></div></div>
<div class="ttc" id="struct____mavlink__command__long__t_html_a9c74f309b82fed5527bf1e7732424f21"><div class="ttname"><a href="struct____mavlink__command__long__t.html#a9c74f309b82fed5527bf1e7732424f21">__mavlink_command_long_t::param5</a></div><div class="ttdeci">float param5</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__command__long_8h_source.html#l00011">mavlink_msg_command_long.h:11</a></div></div>
<div class="ttc" id="classAP__Camera_html_acd2e6ad4afc2f7f0acb4410ce89588fb"><div class="ttname"><a href="classAP__Camera.html#acd2e6ad4afc2f7f0acb4410ce89588fb">AP_Camera::_trigg_dist</a></div><div class="ttdeci">AP_Float _trigg_dist</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00079">AP_Camera.h:79</a></div></div>
<div class="ttc" id="struct____mavlink__digicam__control__t_html_a348697e63bf346dd8e2d028b2a401dd0"><div class="ttname"><a href="struct____mavlink__digicam__control__t.html#a348697e63bf346dd8e2d028b2a401dd0">__mavlink_digicam_control_t::zoom_step</a></div><div class="ttdeci">int8_t zoom_step</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__digicam__control_8h_source.html#l00012">mavlink_msg_digicam_control.h:12</a></div></div>
<div class="ttc" id="AP__Math_8h_html_a108b79eeb35c5d58f324458ec9e1e9f2"><div class="ttname"><a href="AP__Math_8h.html#a108b79eeb35c5d58f324458ec9e1e9f2">is_zero</a></div><div class="ttdeci">static bool is_zero(const float fVal1)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00078">AP_Math.h:78</a></div></div>
<div class="ttc" id="structAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00078">AP_Param.h:78</a></div></div>
<div class="ttc" id="AP__Math_8h_html_abd026c0672c617e3092c9b3e1fcb847f"><div class="ttname"><a href="AP__Math_8h.html#abd026c0672c617e3092c9b3e1fcb847f">constrain_int16</a></div><div class="ttdeci">static int16_t constrain_int16(int16_t amt, int16_t low, int16_t high)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00182">AP_Math.h:182</a></div></div>
<div class="ttc" id="AP__Math_8h_html"><div class="ttname"><a href="AP__Math_8h.html">AP_Math.h</a></div></div>
<div class="ttc" id="classAP__Camera_html_a336a2fbee20b67e8af153e4bc21bd3fd"><div class="ttname"><a href="classAP__Camera.html#a336a2fbee20b67e8af153e4bc21bd3fd">AP_Camera::servo_pic</a></div><div class="ttdeci">void servo_pic()</div><div class="ttdoc">Servo operated camera. </div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00065">AP_Camera.cpp:65</a></div></div>
<div class="ttc" id="classRC__Channel__aux_html_a8fed980206f9aad4c5435c5193690be7"><div class="ttname"><a href="classRC__Channel__aux.html#a8fed980206f9aad4c5435c5193690be7">RC_Channel_aux::set_radio</a></div><div class="ttdeci">static void set_radio(Aux_servo_function_t function, int16_t value)</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channel__aux_8cpp_source.html#l00152">RC_Channel_aux.cpp:152</a></div></div>
<div class="ttc" id="structLocation_html_ad9759dba1fc13f13c531ebdcb2c9588e"><div class="ttname"><a href="structLocation.html#ad9759dba1fc13f13c531ebdcb2c9588e">Location::flags</a></div><div class="ttdeci">Location_Option_Flags flags</div><div class="ttdoc">options bitmask (1<<0 = relative altitude) </div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00115">AP_Common.h:115</a></div></div>
<div class="ttc" id="classAP__Camera_html_a27664cf70d78d5af17d66a3d715048db"><div class="ttname"><a href="classAP__Camera.html#a27664cf70d78d5af17d66a3d715048db">AP_Camera::control_msg</a></div><div class="ttdeci">void control_msg(mavlink_message_t *msg)</div><div class="ttdoc">decode deprecated MavLink message that controls camera. </div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00143">AP_Camera.cpp:143</a></div></div>
<div class="ttc" id="classAP__Camera_html_a12e960c264147ca7a73c21f16c7522c0"><div class="ttname"><a href="classAP__Camera.html#a12e960c264147ca7a73c21f16c7522c0">AP_Camera::update_location</a></div><div class="ttdeci">bool update_location(const struct Location &amp;loc)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00231">AP_Camera.cpp:231</a></div></div>
<div class="ttc" id="struct____mavlink__command__long__t_html_a715bfae8c34e8882b82efbb2bd0e580c"><div class="ttname"><a href="struct____mavlink__command__long__t.html#a715bfae8c34e8882b82efbb2bd0e580c">__mavlink_command_long_t::param2</a></div><div class="ttdeci">float param2</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__command__long_8h_source.html#l00008">mavlink_msg_command_long.h:8</a></div></div>
<div class="ttc" id="classAP__Camera_html_a3124ce12331fb79e0b68b7067d609be2"><div class="ttname"><a href="classAP__Camera.html#a3124ce12331fb79e0b68b7067d609be2">AP_Camera::trigger_pic_cleanup</a></div><div class="ttdeci">void trigger_pic_cleanup()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00121">AP_Camera.cpp:121</a></div></div>
<div class="ttc" id="classAP__Camera_html_a73b785894a0650a4dd8b1ffc24c4c250"><div class="ttname"><a href="classAP__Camera.html#a73b785894a0650a4dd8b1ffc24c4c250">AP_Camera::relay_pic</a></div><div class="ttdeci">void relay_pic()</div><div class="ttdoc">basic relay activation </div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00075">AP_Camera.cpp:75</a></div></div>
<div class="ttc" id="AP__Camera_8h_html_a882ca1b134a856e7a1986b0068306002"><div class="ttname"><a href="AP__Camera_8h.html#a882ca1b134a856e7a1986b0068306002">AP_CAMERA_TRIGGER_TYPE_RELAY</a></div><div class="ttdeci">#define AP_CAMERA_TRIGGER_TYPE_RELAY</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00019">AP_Camera.h:19</a></div></div>
<div class="ttc" id="ardupilotmega_8h_html_a532ed19c5f99d731a8bd3f2f80e48b6ba78badabbfce051ec9d261cd797cb8f63"><div class="ttname"><a href="ardupilotmega_8h.html#a532ed19c5f99d731a8bd3f2f80e48b6ba78badabbfce051ec9d261cd797cb8f63">MAV_CMD_DO_DIGICAM_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="ardupilotmega_8h_source.html#l00078">ardupilotmega.h:78</a></div></div>
<div class="ttc" id="classAP__GPS_html_a199daa774fba57b608c0a245e70c46d5"><div class="ttname"><a href="classAP__GPS.html#a199daa774fba57b608c0a245e70c46d5">AP_GPS::time_epoch_usec</a></div><div class="ttdeci">uint64_t time_epoch_usec(uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="GPS__Backend_8cpp_source.html#l00064">GPS_Backend.cpp:64</a></div></div>
<div class="ttc" id="structLocation_html_a5831f0aca9e51a15adb96fad465f72f8"><div class="ttname"><a href="structLocation.html#a5831f0aca9e51a15adb96fad465f72f8">Location::lng</a></div><div class="ttdeci">int32_t lng</div><div class="ttdoc">param 4 - Longitude * 10**7 </div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00124">AP_Common.h:124</a></div></div>
<div class="ttc" id="classAP__Camera_html_a361e9b2bbcaf421a2cd17220ad25ae5c"><div class="ttname"><a href="classAP__Camera.html#a361e9b2bbcaf421a2cd17220ad25ae5c">AP_Camera::_servo_off_pwm</a></div><div class="ttdeci">AP_Int16 _servo_off_pwm</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00072">AP_Camera.h:72</a></div></div>
<div class="ttc" id="struct____mavlink__digicam__control__t_html"><div class="ttname"><a href="struct____mavlink__digicam__control__t.html">__mavlink_digicam_control_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__digicam__control_8h_source.html#l00005">mavlink_msg_digicam_control.h:5</a></div></div>
<div class="ttc" id="classAP__Camera_html_a06d470d983e22c3c87e4295d1c32238c"><div class="ttname"><a href="classAP__Camera.html#a06d470d983e22c3c87e4295d1c32238c">AP_Camera::_apm_relay</a></div><div class="ttdeci">AP_Relay * _apm_relay</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00074">AP_Camera.h:74</a></div></div>
<div class="ttc" id="struct____mavlink__command__long__t_html_a1448f543670b7a8973c6461254cce429"><div class="ttname"><a href="struct____mavlink__command__long__t.html#a1448f543670b7a8973c6461254cce429">__mavlink_command_long_t::param4</a></div><div class="ttdeci">float param4</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__command__long_8h_source.html#l00010">mavlink_msg_command_long.h:10</a></div></div>
<div class="ttc" id="AP__Camera_8h_html_a77e9f793badf723626ba9cc8447f3e58"><div class="ttname"><a href="AP__Camera_8h.html#a77e9f793badf723626ba9cc8447f3e58">AP_CAMERA_TRIGGER_DEFAULT_DURATION</a></div><div class="ttdeci">#define AP_CAMERA_TRIGGER_DEFAULT_DURATION</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00023">AP_Camera.h:23</a></div></div>
<div class="ttc" id="struct____mavlink__command__long__t_html_a9b11618cd6d409944727cfcc0d637f72"><div class="ttname"><a href="struct____mavlink__command__long__t.html#a9b11618cd6d409944727cfcc0d637f72">__mavlink_command_long_t::param3</a></div><div class="ttdeci">float param3</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__command__long_8h_source.html#l00009">mavlink_msg_command_long.h:9</a></div></div>
<div class="ttc" id="AHRS__Test_8cpp_html_a0a15280249072432f8c559cc00d09dee"><div class="ttname"><a href="AHRS__Test_8cpp.html#a0a15280249072432f8c559cc00d09dee">ahrs</a></div><div class="ttdeci">AP_AHRS_DCM ahrs(ins, baro, gps)</div></div>
<div class="ttc" id="struct____mavlink__digicam__control__t_html_aee93a31e833bd6e67a650fc9c4cbbcb3"><div class="ttname"><a href="struct____mavlink__digicam__control__t.html#aee93a31e833bd6e67a650fc9c4cbbcb3">__mavlink_digicam_control_t::session</a></div><div class="ttdeci">uint8_t session</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__digicam__control_8h_source.html#l00010">mavlink_msg_digicam_control.h:10</a></div></div>
<div class="ttc" id="AHRS__Test_8cpp_html_a962e3f0f8682f6dedb5a001a70bdd65e"><div class="ttname"><a href="AHRS__Test_8cpp.html#a962e3f0f8682f6dedb5a001a70bdd65e">gps</a></div><div class="ttdeci">AP_GPS gps</div><div class="ttdef"><b>Definition:</b> <a href="AHRS__Test_8cpp_source.html#l00019">AHRS_Test.cpp:19</a></div></div>
<div class="ttc" id="AP__Math_8h_html_aa825a788804b8dd4cf1e3cfb42960a8b"><div class="ttname"><a href="AP__Math_8h.html#aa825a788804b8dd4cf1e3cfb42960a8b">get_distance</a></div><div class="ttdeci">float get_distance(const struct Location &amp;loc1, const struct Location &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="location_8cpp_source.html#l00058">location.cpp:58</a></div></div>
<div class="ttc" id="AP__Camera_8h_html_acf9f5a2bd07c05c6fc5a3b5f682a6f82"><div class="ttname"><a href="AP__Camera_8h.html#acf9f5a2bd07c05c6fc5a3b5f682a6f82">AP_CAMERA_TRIGGER_TYPE_SERVO</a></div><div class="ttdeci">#define AP_CAMERA_TRIGGER_TYPE_SERVO</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00018">AP_Camera.h:18</a></div></div>
<div class="ttc" id="AP__Camera_8h_html_adb9fdb00ca2e2319ea1dc5dd6ab92f91"><div class="ttname"><a href="AP__Camera_8h.html#adb9fdb00ca2e2319ea1dc5dd6ab92f91">AP_CAMERA_SERVO_ON_PWM</a></div><div class="ttdeci">#define AP_CAMERA_SERVO_ON_PWM</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00025">AP_Camera.h:25</a></div></div>
<div class="ttc" id="classAP__Camera_html_a7c7aa23d1a71db5345bb11899bbb8f31"><div class="ttname"><a href="classAP__Camera.html#a7c7aa23d1a71db5345bb11899bbb8f31">AP_Camera::control</a></div><div class="ttdeci">void control(float session, float zoom_pos, float zoom_step, float focus_lock, float shooting_cmd, float cmd_id)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00176">AP_Camera.cpp:176</a></div></div>
<div class="ttc" id="mavlink__msg__command__long_8h_html_a4b9ea1702839a5a09d44775799a24ec8"><div class="ttname"><a href="mavlink__msg__command__long_8h.html#a4b9ea1702839a5a09d44775799a24ec8">mavlink_msg_command_long_encode</a></div><div class="ttdeci">static uint16_t mavlink_msg_command_long_encode(uint8_t system_id, uint8_t component_id, mavlink_message_t *msg, const mavlink_command_long_t *command_long)</div><div class="ttdoc">Encode a command_long struct. </div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__command__long_8h_source.html#l00179">mavlink_msg_command_long.h:179</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a8a160130dd99016a19abab9d85917261"><div class="ttname"><a href="classAP__AHRS.html#a8a160130dd99016a19abab9d85917261">AP_AHRS::yaw_sensor</a></div><div class="ttdeci">int32_t yaw_sensor</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00201">AP_AHRS.h:201</a></div></div>
<div class="ttc" id="AP__Camera_8h_html"><div class="ttname"><a href="AP__Camera_8h.html">AP_Camera.h</a></div><div class="ttdoc">Photo or video camera manager, with EEPROM-backed storage of constants. </div></div>
<div class="ttc" id="classAP__Camera_html_a74372e2b8e5d3cd3b464f2ef417cb0f6"><div class="ttname"><a href="classAP__Camera.html#a74372e2b8e5d3cd3b464f2ef417cb0f6">AP_Camera::trigger_pic</a></div><div class="ttdeci">void trigger_pic(bool send_mavlink_msg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00090">AP_Camera.cpp:90</a></div></div>
<div class="ttc" id="AP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00053">AP_Param.h:53</a></div></div>
<div class="ttc" id="AP__Relay_8h_html"><div class="ttname"><a href="AP__Relay_8h.html">AP_Relay.h</a></div><div class="ttdoc">APM relay control class. </div></div>
<div class="ttc" id="struct____mavlink__digicam__control__t_html_aafd3d960b150853d157257cde74d8cfa"><div class="ttname"><a href="struct____mavlink__digicam__control__t.html#aafd3d960b150853d157257cde74d8cfa">__mavlink_digicam_control_t::zoom_pos</a></div><div class="ttdeci">uint8_t zoom_pos</div><div class="ttdef"><b>Definition:</b> <a href="mavlink__msg__digicam__control_8h_source.html#l00011">mavlink_msg_digicam_control.h:11</a></div></div>
<div class="ttc" id="structLocation__Option__Flags_html_a3f0f17e655550917bc3177e876d6dc14"><div class="ttname"><a href="structLocation__Option__Flags.html#a3f0f17e655550917bc3177e876d6dc14">Location_Option_Flags::relative_alt</a></div><div class="ttdeci">uint8_t relative_alt</div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00107">AP_Common.h:107</a></div></div>
<div class="ttc" id="structLocation_html"><div class="ttname"><a href="structLocation.html">Location</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00113">AP_Common.h:113</a></div></div>
<div class="ttc" id="classAP__Camera_html_ab0cb6709e2683b25d372e1f1da6a15d1"><div class="ttname"><a href="classAP__Camera.html#ab0cb6709e2683b25d372e1f1da6a15d1">AP_Camera::_image_index</a></div><div class="ttdeci">uint16_t _image_index</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00081">AP_Camera.h:81</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 14 2015 23:43:12 for APM:Libraries by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
